(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Tr=!1;var Yr=Array.isArray,Ti=Array.prototype.indexOf,pr=Array.from,wa=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,ba=Object.getOwnPropertyDescriptors,Di=Object.prototype,Pi=Array.prototype,Br=Object.getPrototypeOf,ta=Object.isExtensible;const tn=()=>{};function Ci(e){return e()}function or(e){for(var t=0;t<e.length;t++)e[t]()}function La(){var e,t,r=new Promise((a,i)=>{e=a,t=i});return{promise:r,resolve:e,reject:t}}const Qe=2,lr=4,Zn=8,Sa=1<<24,Gt=16,Jt=32,mn=64,Fr=128,Pt=512,Je=1024,ot=2048,jt=4096,bt=8192,Vt=16384,Xr=32768,kn=65536,na=1<<17,Ma=1<<18,In=1<<19,Ea=1<<20,Kt=1<<25,pn=32768,Dr=1<<21,Hr=1<<22,nn=1<<23,hn=Symbol("$state"),Ai=Symbol("legacy props"),Ii=Symbol(""),Sn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ur(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function ka(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ri(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ni(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Oi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $i(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ji(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Bi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Xi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Hi=1,Ui=2,Ta=4,Ki=8,Vi=16,Zi=2,zi=4,qi=8,Da=1,Gi=2,qe=Symbol(),Ji="http://www.w3.org/1999/xhtml";function Qi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Pa(e){return e===this.v}function Ca(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Aa(e){return!Ca(e,this.v)}let Rn=!1,es=!1;function ts(){Rn=!0}let We=null;function Tn(e){We=e}function gt(e,t=!1,r){We={p:We,i:!1,c:null,e:null,s:e,x:null,l:Rn&&!t?{s:null,u:null,$:[]}:null}}function xt(e){var t=We,r=t.e;if(r!==null){t.e=null;for(var a of r)qa(a)}return e!==void 0&&(t.x=e),t.i=!0,We=t.p,e??{}}function zn(){return!Rn||We!==null&&We.l===null}let fn=[];function Ia(){var e=fn;fn=[],or(e)}function Nn(e){if(fn.length===0&&!Xn){var t=fn;queueMicrotask(()=>{t===fn&&Ia()})}fn.push(e)}function ns(){for(;fn.length>0;)Ia()}function Ra(e){var t=De;if(t===null)return pe.f|=nn,e;if((t.f&Xr)===0){if((t.f&Fr)===0)throw e;t.b.error(e)}else Dn(e,t)}function Dn(e,t){for(;t!==null;){if((t.f&Fr)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const rs=-7169;function Ve(e,t){e.f=e.f&rs|t}function Kr(e){(e.f&Pt)!==0||e.deps===null?Ve(e,Je):Ve(e,jt)}function Na(e){if(e!==null)for(const t of e)(t.f&Qe)===0||(t.f&pn)===0||(t.f^=pn,Na(t.deps))}function Oa(e,t,r){(e.f&ot)!==0?t.add(e):(e.f&jt)!==0&&r.add(e),Na(e.deps),Ve(e,Je)}const Jn=new Set;let Ie=null,nr=null,It=null,Tt=[],_r=null,Pr=!1,Xn=!1;class Ot{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#a=0;#i=null;#r=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#a>0}process(t){Tt=[],nr=null,this.apply();var r=[],a=[];for(const i of t)this.#o(i,r,a);this.is_fork||this.#c(),this.is_deferred()?(this.#l(a),this.#l(r)):(nr=this,Ie=null,ra(a),ra(r),nr=null,this.#i?.resolve()),It=null}#o(t,r,a){t.f^=Je;for(var i=t.first,s=null;i!==null;){var o=i.f,u=(o&(Jt|mn))!==0,l=u&&(o&Je)!==0,d=l||(o&bt)!==0||this.skipped_effects.has(i);if(!d&&i.fn!==null){u?i.f^=Je:s!==null&&(o&(lr|Zn|Sa))!==0?s.b.defer_effect(i):(o&lr)!==0?r.push(i):$n(i)&&((o&Gt)!==0&&this.#r.add(i),Cn(i));var c=i.first;if(c!==null){i=c;continue}}var p=i.parent;for(i=i.next;i===null&&p!==null;)p===s&&(s=null),i=p.next,p=p.parent}}#l(t){for(var r=0;r<t.length;r+=1)Oa(t[r],this.#r,this.#n)}capture(t,r){r!==qe&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&nn)===0&&(this.current.set(t,t.v),It?.set(t,t.v))}activate(){Ie=this,this.apply()}deactivate(){Ie===this&&(Ie=null,It=null)}flush(){if(this.activate(),Tt.length>0){if($a(),Ie!==null&&Ie!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#s)t(this);this.#s.clear()}#c(){if(this.#a===0){for(const t of this.#t)t();this.#t.clear()}this.#e===0&&this.#u()}#u(){if(Jn.size>1){this.previous.clear();var t=It,r=!0;for(const i of Jn){if(i===this){r=!1;continue}const s=[];for(const[u,l]of this.current){if(i.current.has(u))if(r&&l!==i.current.get(u))i.current.set(u,l);else continue;s.push(u)}if(s.length===0)continue;const o=[...i.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var a=Tt;Tt=[];const u=new Set,l=new Map;for(const d of s)ja(d,o,u,l);if(Tt.length>0){Ie=i,i.apply();for(const d of Tt)i.#o(d,[],[]);i.deactivate()}Tt=a}}Ie=null,It=t}this.committed=!0,Jn.delete(this)}increment(t){this.#e+=1,t&&(this.#a+=1)}decrement(t){this.#e-=1,t&&(this.#a-=1),this.revive()}revive(){for(const t of this.#r)this.#n.delete(t),Ve(t,ot),qt(t);for(const t of this.#n)Ve(t,jt),qt(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#s.add(t)}settled(){return(this.#i??=La()).promise}static ensure(){if(Ie===null){const t=Ie=new Ot;Jn.add(Ie),Xn||Ot.enqueue(()=>{Ie===t&&t.flush()})}return Ie}static enqueue(t){Nn(t)}apply(){}}function as(e){var t=Xn;Xn=!0;try{for(var r;;){if(ns(),Tt.length===0&&(Ie?.flush(),Tt.length===0))return _r=null,r;$a()}}finally{Xn=t}}function $a(){var e=gn;Pr=!0;var t=null;try{var r=0;for(ur(!0);Tt.length>0;){var a=Ot.ensure();if(r++>1e3){var i,s;is()}a.process(Tt),rn.clear()}}finally{Pr=!1,ur(e),_r=null}}function is(){try{ji()}catch(e){Dn(e,_r)}}let Xt=null;function ra(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var a=e[r++];if((a.f&(Vt|bt))===0&&$n(a)&&(Xt=new Set,Cn(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?Qa(a):a.fn=null),Xt?.size>0)){rn.clear();for(const i of Xt){if((i.f&(Vt|bt))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)Xt.has(o)&&(Xt.delete(o),s.push(o)),o=o.parent;for(let u=s.length-1;u>=0;u--){const l=s[u];(l.f&(Vt|bt))===0&&Cn(l)}}Xt.clear()}}Xt=null}}function ja(e,t,r,a){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&Qe)!==0?ja(i,t,r,a):(s&(Hr|Gt))!==0&&(s&ot)===0&&Wa(i,t,a)&&(Ve(i,ot),qt(i))}}function Wa(e,t,r){const a=r.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&Qe)!==0&&Wa(i,t,r))return r.set(i,!0),!0}return r.set(e,!1),!1}function qt(e){for(var t=_r=e;t.parent!==null;){t=t.parent;var r=t.f;if(Pr&&t===De&&(r&Gt)!==0&&(r&Ma)===0)return;if((r&(mn|Jt))!==0){if((r&Je)===0)return;t.f^=Je}}Tt.push(t)}function ss(e){let t=0,r=_n(0),a;return()=>{zr()&&(n(r),On(()=>(t===0&&(a=v(()=>e(()=>Hn(r)))),t+=1,()=>{Nn(()=>{t-=1,t===0&&(a?.(),a=void 0,Hn(r))})})))}}var os=kn|In|Fr;function ls(e,t,r){new cs(e,t,r)}class cs{parent;is_pending=!1;#t;#s=null;#e;#a;#i;#r=null;#n=null;#o=null;#l=null;#c=null;#u=0;#d=0;#v=!1;#h=new Set;#y=new Set;#f=null;#m=ss(()=>(this.#f=_n(this.#u),()=>{this.#f=null}));constructor(t,r,a){this.#t=t,this.#e=r,this.#a=a,this.parent=De.b,this.is_pending=!!this.#e.pending,this.#i=qr(()=>{De.b=this;{var i=this.#p();try{this.#r=Dt(()=>a(i))}catch(s){this.error(s)}this.#d>0?this.#x():this.is_pending=!1}return()=>{this.#c?.remove()}},os)}#w(){try{this.#r=Dt(()=>this.#a(this.#t))}catch(t){this.error(t)}}#b(){const t=this.#e.pending;t&&(this.#n=Dt(()=>t(this.#t)),Ot.enqueue(()=>{var r=this.#p();this.#r=this.#g(()=>(Ot.ensure(),Dt(()=>this.#a(r)))),this.#d>0?this.#x():(yn(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#p(){var t=this.#t;return this.is_pending&&(this.#c=Zt(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){Oa(t,this.#h,this.#y)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var r=De,a=pe,i=We;$t(this.#i),ht(this.#i),Tn(this.#i.ctx);try{return t()}catch(s){return Ra(s),null}finally{$t(r),ht(a),Tn(i)}}#x(){const t=this.#e.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),ni(this.#r,this.#l)),this.#n===null&&(this.#n=Dt(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}if(this.#d+=t,this.#d===0){this.is_pending=!1;for(const r of this.#h)Ve(r,ot),qt(r);for(const r of this.#y)Ve(r,jt),qt(r);this.#h.clear(),this.#y.clear(),this.#n&&yn(this.#n,()=>{this.#n=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#_(t),this.#u+=t,this.#f&&Pn(this.#f,this.#u)}get_effect_pending(){return this.#m(),n(this.#f)}error(t){var r=this.#e.onerror;let a=this.#e.failed;if(this.#v||!r&&!a)throw t;this.#r&&(yt(this.#r),this.#r=null),this.#n&&(yt(this.#n),this.#n=null),this.#o&&(yt(this.#o),this.#o=null);var i=!1,s=!1;const o=()=>{if(i){Qi();return}i=!0,s&&Xi(),Ot.ensure(),this.#u=0,this.#o!==null&&yn(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#v=!1,Dt(()=>this.#a(this.#t)))),this.#d>0?this.#x():this.is_pending=!1};var u=pe;try{ht(null),s=!0,r?.(t,o),s=!1}catch(l){Dn(l,this.#i&&this.#i.parent)}finally{ht(u)}a&&Nn(()=>{this.#o=this.#g(()=>{Ot.ensure(),this.#v=!0;try{return Dt(()=>{a(this.#t,()=>t,()=>o)})}catch(l){return Dn(l,this.#i.parent),null}finally{this.#v=!1}})})}}function us(e,t,r,a){const i=zn()?Vr:Ke;if(r.length===0&&e.length===0){a(t.map(i));return}var s=Ie,o=De,u=ds();function l(){Promise.all(r.map(d=>fs(d))).then(d=>{u();try{a([...t.map(i),...d])}catch(c){(o.f&Vt)===0&&Dn(c,o)}s?.deactivate(),cr()}).catch(d=>{Dn(d,o)})}e.length>0?Promise.all(e).then(()=>{u();try{return l()}finally{s?.deactivate(),cr()}}):l()}function ds(){var e=De,t=pe,r=We,a=Ie;return function(s=!0){$t(e),ht(t),Tn(r),s&&a?.activate()}}function cr(){$t(null),ht(null),Tn(null)}function Vr(e){var t=Qe|ot,r=pe!==null&&(pe.f&Qe)!==0?pe:null;return De!==null&&(De.f|=In),{ctx:We,deps:null,effects:null,equals:Pa,f:t,fn:e,reactions:null,rv:0,v:qe,wv:0,parent:r??De,ac:null}}function fs(e,t,r){let a=De;a===null&&Ri();var i=a.b,s=void 0,o=_n(qe),u=!pe,l=new Map;return Ls(()=>{var d=La();s=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{c===Ie&&c.committed&&c.deactivate(),cr()})}catch(h){d.reject(h),cr()}var c=Ie;if(u){var p=i.is_rendered();i.update_pending_count(1),c.increment(p),l.get(c)?.reject(Sn),l.delete(c),l.set(c,d)}const g=(h,L=void 0)=>{if(c.activate(),L)L!==Sn&&(o.f|=nn,Pn(o,L));else{(o.f&nn)!==0&&(o.f^=nn),Pn(o,h);for(const[E,m]of l){if(l.delete(E),E===c)break;m.reject(Sn)}}u&&(i.update_pending_count(-1),c.decrement(p))};d.promise.then(g,h=>g(null,h||"unknown"))}),wr(()=>{for(const d of l.values())d.reject(Sn)}),new Promise(d=>{function c(p){function g(){p===s?d(o):c(s)}p.then(g,g)}c(s)})}function Ke(e){const t=Vr(e);return t.equals=Aa,t}function Ya(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)yt(t[r])}}function vs(e){for(var t=e.parent;t!==null;){if((t.f&Qe)===0)return(t.f&Vt)===0?t:null;t=t.parent}return null}function Zr(e){var t,r=De;$t(vs(e));try{e.f&=~pn,Ya(e),t=si(e)}finally{$t(r)}return t}function Ba(e){var t=Zr(e);if(!e.equals(t)&&(e.wv=ai(),(!Ie?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){Ve(e,Je);return}sn||(It!==null?(zr()||Ie?.is_fork)&&It.set(e,t):Kr(e))}let Cr=new Set;const rn=new Map;let Fa=!1;function _n(e,t){var r={f:0,v:e,reactions:null,equals:Pa,rv:0,wv:0};return r}function Qt(e,t){const r=_n(e);return Es(r),r}function P(e,t=!1,r=!0){const a=_n(e);return t||(a.equals=Aa),Rn&&r&&We!==null&&We.l!==null&&(We.l.s??=[]).push(a),a}function _(e,t,r=!1){pe!==null&&(!Rt||(pe.f&na)!==0)&&zn()&&(pe.f&(Qe|Gt|Hr|na))!==0&&!zt?.includes(e)&&Fi();let a=r?Mn(t):t;return Pn(e,a)}function Pn(e,t){if(!e.equals(t)){var r=e.v;sn?rn.set(e,t):rn.set(e,r),e.v=t;var a=Ot.ensure();if(a.capture(e,r),(e.f&Qe)!==0){const i=e;(e.f&ot)!==0&&Zr(i),Kr(i)}e.wv=ai(),Xa(e,ot),zn()&&De!==null&&(De.f&Je)!==0&&(De.f&(Jt|mn))===0&&(kt===null?ks([e]):kt.push(e)),!a.is_fork&&Cr.size>0&&!Fa&&hs()}return t}function hs(){Fa=!1;var e=gn;ur(!0);const t=Array.from(Cr);try{for(const r of t)(r.f&Je)!==0&&Ve(r,jt),$n(r)&&Cn(r)}finally{ur(e)}Cr.clear()}function ys(e,t=1){var r=n(e),a=t===1?r++:r--;return _(e,r),a}function Hn(e){_(e,e.v+1)}function Xa(e,t){var r=e.reactions;if(r!==null)for(var a=zn(),i=r.length,s=0;s<i;s++){var o=r[s],u=o.f;if(!(!a&&o===De)){var l=(u&ot)===0;if(l&&Ve(o,t),(u&Qe)!==0){var d=o;It?.delete(d),(u&pn)===0&&(u&Pt&&(o.f|=pn),Xa(d,jt))}else l&&((u&Gt)!==0&&Xt!==null&&Xt.add(o),qt(o))}}}function Mn(e){if(typeof e!="object"||e===null||hn in e)return e;const t=Br(e);if(t!==Di&&t!==Pi)return e;var r=new Map,a=Yr(e),i=Qt(0),s=xn,o=u=>{if(xn===s)return u();var l=pe,d=xn;ht(null),sa(s);var c=u();return ht(l),sa(d),c};return a&&r.set("length",Qt(e.length)),new Proxy(e,{defineProperty(u,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Yi();var c=r.get(l);return c===void 0?c=o(()=>{var p=Qt(d.value);return r.set(l,p),p}):_(c,d.value,!0),!0},deleteProperty(u,l){var d=r.get(l);if(d===void 0){if(l in u){const c=o(()=>Qt(qe));r.set(l,c),Hn(i)}}else _(d,qe),Hn(i);return!0},get(u,l,d){if(l===hn)return e;var c=r.get(l),p=l in u;if(c===void 0&&(!p||vn(u,l)?.writable)&&(c=o(()=>{var h=Mn(p?u[l]:qe),L=Qt(h);return L}),r.set(l,c)),c!==void 0){var g=n(c);return g===qe?void 0:g}return Reflect.get(u,l,d)},getOwnPropertyDescriptor(u,l){var d=Reflect.getOwnPropertyDescriptor(u,l);if(d&&"value"in d){var c=r.get(l);c&&(d.value=n(c))}else if(d===void 0){var p=r.get(l),g=p?.v;if(p!==void 0&&g!==qe)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(u,l){if(l===hn)return!0;var d=r.get(l),c=d!==void 0&&d.v!==qe||Reflect.has(u,l);if(d!==void 0||De!==null&&(!c||vn(u,l)?.writable)){d===void 0&&(d=o(()=>{var g=c?Mn(u[l]):qe,h=Qt(g);return h}),r.set(l,d));var p=n(d);if(p===qe)return!1}return c},set(u,l,d,c){var p=r.get(l),g=l in u;if(a&&l==="length")for(var h=d;h<p.v;h+=1){var L=r.get(h+"");L!==void 0?_(L,qe):h in u&&(L=o(()=>Qt(qe)),r.set(h+"",L))}if(p===void 0)(!g||vn(u,l)?.writable)&&(p=o(()=>Qt(void 0)),_(p,Mn(d)),r.set(l,p));else{g=p.v!==qe;var E=o(()=>Mn(d));_(p,E)}var m=Reflect.getOwnPropertyDescriptor(u,l);if(m?.set&&m.set.call(c,d),!g){if(a&&typeof l=="string"){var A=r.get("length"),R=Number(l);Number.isInteger(R)&&R>=A.v&&_(A,R+1)}Hn(i)}return!0},ownKeys(u){n(i);var l=Reflect.ownKeys(u).filter(p=>{var g=r.get(p);return g===void 0||g.v!==qe});for(var[d,c]of r)c.v!==qe&&!(d in u)&&l.push(d);return l},setPrototypeOf(){Bi()}})}var En,Ha,Ua,Ka;function gs(){if(En===void 0){En=window,Ha=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Ua=vn(t,"firstChild").get,Ka=vn(t,"nextSibling").get,ta(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ta(r)&&(r.__t=void 0)}}function Zt(e=""){return document.createTextNode(e)}function Ht(e){return Ua.call(e)}function qn(e){return Ka.call(e)}function x(e,t){return Ht(e)}function Ne(e,t=!1){{var r=Ht(e);return r instanceof Comment&&r.data===""?qn(r):r}}function y(e,t=1,r=!1){let a=e;for(;t--;)a=qn(a);return a}function xs(e){e.textContent=""}function Va(){return!1}let aa=!1;function ps(){aa||(aa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function mr(e){var t=pe,r=De;ht(null),$t(null);try{return e()}finally{ht(t),$t(r)}}function Za(e,t,r,a=r){e.addEventListener(t,()=>mr(r));const i=e.__on_r;i?e.__on_r=()=>{i(),a(!0)}:e.__on_r=()=>a(!0),ps()}function za(e){De===null&&(pe===null&&$i(),Oi()),sn&&Ni()}function _s(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Wt(e,t,r){var a=De;a!==null&&(a.f&bt)!==0&&(e|=bt);var i={ctx:We,deps:null,nodes:null,f:e|ot|Pt,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Cn(i),i.f|=Xr}catch(u){throw yt(i),u}else t!==null&&qt(i);var s=i;if(r&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&In)===0&&(s=s.first,(e&Gt)!==0&&(e&kn)!==0&&s!==null&&(s.f|=kn)),s!==null&&(s.parent=a,a!==null&&_s(s,a),pe!==null&&(pe.f&Qe)!==0&&(e&mn)===0)){var o=pe;(o.effects??=[]).push(s)}return i}function zr(){return pe!==null&&!Rt}function wr(e){const t=Wt(Zn,null,!1);return Ve(t,Je),t.teardown=e,t}function Ar(e){za();var t=De.f,r=!pe&&(t&Jt)!==0&&(t&Xr)===0;if(r){var a=We;(a.e??=[]).push(e)}else return qa(e)}function qa(e){return Wt(lr|Ea,e,!1)}function ms(e){return za(),Wt(Zn|Ea,e,!0)}function ws(e){Ot.ensure();const t=Wt(mn|In,e,!0);return(r={})=>new Promise(a=>{r.outro?yn(t,()=>{yt(t),a(void 0)}):(yt(t),a(void 0))})}function bs(e){return Wt(lr,e,!1)}function H(e,t){var r=We,a={effect:null,ran:!1,deps:e};r.l.$.push(a),a.effect=On(()=>{e(),!a.ran&&(a.ran=!0,v(t))})}function Yt(){var e=We;On(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Je)!==0&&r.deps!==null&&Ve(r,jt),$n(r)&&Cn(r),t.ran=!1}})}function Ls(e){return Wt(Hr|In,e,!0)}function On(e,t=0){return Wt(Zn|t,e,!0)}function Y(e,t=[],r=[],a=[]){us(a,t,r,i=>{Wt(Zn,()=>e(...i.map(n)),!0)})}function qr(e,t=0){var r=Wt(Gt|t,e,!0);return r}function Dt(e){return Wt(Jt|In,e,!0)}function Ga(e){var t=e.teardown;if(t!==null){const r=sn,a=pe;ia(!0),ht(null);try{t.call(null)}finally{ia(r),ht(a)}}}function Ja(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&mr(()=>{i.abort(Sn)});var a=r.next;(r.f&mn)!==0?r.parent=null:yt(r,t),r=a}}function Ss(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Jt)===0&&yt(t),t=r}}function yt(e,t=!0){var r=!1;(t||(e.f&Ma)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ms(e.nodes.start,e.nodes.end),r=!0),Ja(e,t&&!r),dr(e,0),Ve(e,Vt);var a=e.nodes&&e.nodes.t;if(a!==null)for(const s of a)s.stop();Ga(e);var i=e.parent;i!==null&&i.first!==null&&Qa(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ms(e,t){for(;e!==null;){var r=e===t?null:qn(e);e.remove(),e=r}}function Qa(e){var t=e.parent,r=e.prev,a=e.next;r!==null&&(r.next=a),a!==null&&(a.prev=r),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=r))}function yn(e,t,r=!0){var a=[];ei(e,a,!0);var i=()=>{r&&yt(e),t&&t()},s=a.length;if(s>0){var o=()=>--s||i();for(var u of a)u.out(o)}else i()}function ei(e,t,r){if((e.f&bt)===0){e.f^=bt;var a=e.nodes&&e.nodes.t;if(a!==null)for(const u of a)(u.is_global||r)&&t.push(u);for(var i=e.first;i!==null;){var s=i.next,o=(i.f&kn)!==0||(i.f&Jt)!==0&&(e.f&Gt)!==0;ei(i,t,o?r:!1),i=s}}}function Gr(e){ti(e,!0)}function ti(e,t){if((e.f&bt)!==0){e.f^=bt,(e.f&Je)===0&&(Ve(e,ot),qt(e));for(var r=e.first;r!==null;){var a=r.next,i=(r.f&kn)!==0||(r.f&Jt)!==0;ti(r,i?t:!1),r=a}var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||t)&&o.in()}}function ni(e,t){if(e.nodes)for(var r=e.nodes.start,a=e.nodes.end;r!==null;){var i=r===a?null:qn(r);t.append(r),r=i}}let gn=!1;function ur(e){gn=e}let sn=!1;function ia(e){sn=e}let pe=null,Rt=!1;function ht(e){pe=e}let De=null;function $t(e){De=e}let zt=null;function Es(e){pe!==null&&(zt===null?zt=[e]:zt.push(e))}let st=null,wt=0,kt=null;function ks(e){kt=e}let ri=1,Kn=0,xn=Kn;function sa(e){xn=e}function ai(){return++ri}function $n(e){var t=e.f;if((t&ot)!==0)return!0;if(t&Qe&&(e.f&=~pn),(t&jt)!==0){for(var r=e.deps,a=r.length,i=0;i<a;i++){var s=r[i];if($n(s)&&Ba(s),s.wv>e.wv)return!0}(t&Pt)!==0&&It===null&&Ve(e,Je)}return!1}function ii(e,t,r=!0){var a=e.reactions;if(a!==null&&!zt?.includes(e))for(var i=0;i<a.length;i++){var s=a[i];(s.f&Qe)!==0?ii(s,t,!1):t===s&&(r?Ve(s,ot):(s.f&Je)!==0&&Ve(s,jt),qt(s))}}function si(e){var t=st,r=wt,a=kt,i=pe,s=zt,o=We,u=Rt,l=xn,d=e.f;st=null,wt=0,kt=null,pe=(d&(Jt|mn))===0?e:null,zt=null,Tn(e.ctx),Rt=!1,xn=++Kn,e.ac!==null&&(mr(()=>{e.ac.abort(Sn)}),e.ac=null);try{e.f|=Dr;var c=e.fn,p=c(),g=e.deps;if(st!==null){var h;if(dr(e,wt),g!==null&&wt>0)for(g.length=wt+st.length,h=0;h<st.length;h++)g[wt+h]=st[h];else e.deps=g=st;if(zr()&&(e.f&Pt)!==0)for(h=wt;h<g.length;h++)(g[h].reactions??=[]).push(e)}else g!==null&&wt<g.length&&(dr(e,wt),g.length=wt);if(zn()&&kt!==null&&!Rt&&g!==null&&(e.f&(Qe|jt|ot))===0)for(h=0;h<kt.length;h++)ii(kt[h],e);return i!==null&&i!==e&&(Kn++,kt!==null&&(a===null?a=kt:a.push(...kt))),(e.f&nn)!==0&&(e.f^=nn),p}catch(L){return Ra(L)}finally{e.f^=Dr,st=t,wt=r,kt=a,pe=i,zt=s,Tn(o),Rt=u,xn=l}}function Ts(e,t){let r=t.reactions;if(r!==null){var a=Ti.call(r,e);if(a!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[a]=r[i],r.pop())}}if(r===null&&(t.f&Qe)!==0&&(st===null||!st.includes(t))){var s=t;(s.f&Pt)!==0&&(s.f^=Pt,s.f&=~pn),Kr(s),Ya(s),dr(s,0)}}function dr(e,t){var r=e.deps;if(r!==null)for(var a=t;a<r.length;a++)Ts(e,r[a])}function Cn(e){var t=e.f;if((t&Vt)===0){Ve(e,Je);var r=De,a=gn;De=e,gn=!0;try{(t&(Gt|Sa))!==0?Ss(e):Ja(e),Ga(e);var i=si(e);e.teardown=typeof i=="function"?i:null,e.wv=ri;var s;Tr&&es&&(e.f&ot)!==0&&e.deps}finally{gn=a,De=r}}}async function Ds(){await Promise.resolve(),as()}function n(e){var t=e.f,r=(t&Qe)!==0;if(pe!==null&&!Rt){var a=De!==null&&(De.f&Vt)!==0;if(!a&&!zt?.includes(e)){var i=pe.deps;if((pe.f&Dr)!==0)e.rv<Kn&&(e.rv=Kn,st===null&&i!==null&&i[wt]===e?wt++:st===null?st=[e]:st.includes(e)||st.push(e));else{(pe.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[pe]:s.includes(pe)||s.push(pe)}}}if(sn&&rn.has(e))return rn.get(e);if(r){var o=e;if(sn){var u=o.v;return((o.f&Je)===0&&o.reactions!==null||li(o))&&(u=Zr(o)),rn.set(o,u),u}var l=(o.f&Pt)===0&&!Rt&&pe!==null&&(gn||(pe.f&Pt)!==0),d=o.deps===null;$n(o)&&(l&&(o.f|=Pt),Ba(o)),l&&!d&&oi(o)}if(It?.has(e))return It.get(e);if((e.f&nn)!==0)throw e.v;return e.v}function oi(e){if(e.deps!==null){e.f|=Pt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Qe)!==0&&(t.f&Pt)===0&&oi(t)}}function li(e){if(e.v===qe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(rn.has(t)||(t.f&Qe)!==0&&li(t))return!0;return!1}function v(e){var t=Rt;try{return Rt=!0,e()}finally{Rt=t}}function O(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hn in e)Ir(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&hn in r&&Ir(r)}}}function Ir(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Ir(e[a],t)}catch{}const r=Br(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const a=ba(r);for(let i in a){const s=a[i].get;if(s)try{s.call(e)}catch{}}}}}const Ps=["touchstart","touchmove"];function Cs(e){return Ps.includes(e)}const As=new Set,oa=new Set;function Is(e,t,r,a={}){function i(s){if(a.capture||Wn.call(t,s),!s.cancelBubble)return mr(()=>r?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Nn(()=>{t.addEventListener(e,i,a)}):t.addEventListener(e,i,a),i}function X(e,t,r,a,i){var s={capture:a,passive:i},o=Is(e,t,r,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&wr(()=>{t.removeEventListener(e,o,s)})}let la=null;function Wn(e){var t=this,r=t.ownerDocument,a=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;la=e;var o=0,u=la===e&&e.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=i.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=i[o]||e.target,s!==t){wa(e,"currentTarget",{configurable:!0,get(){return s||r}});var c=pe,p=De;ht(null),$t(null);try{for(var g,h=[];s!==null;){var L=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+a];E!=null&&(!s.disabled||e.target===s)&&E.call(s,e)}catch(m){g?h.push(m):g=m}if(e.cancelBubble||L===t||L===null)break;s=L}if(g){for(let m of h)queueMicrotask(()=>{throw m});throw g}}finally{e.__root=t,delete e.currentTarget,ht(c),$t(p)}}}function ci(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function An(e,t){var r=De;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function Se(e,t){var r=(t&Da)!==0,a=(t&Gi)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ci(s?e:"<!>"+e),r||(i=Ht(i)));var o=a||Ha?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=Ht(o),l=o.lastChild;An(u,l)}else An(o,o);return o}}function Rs(e,t,r="svg"){var a=!e.startsWith("<!>"),i=(t&Da)!==0,s=`<${r}>${a?e:"<!>"+e}</${r}>`,o;return()=>{if(!o){var u=ci(s),l=Ht(u);if(i)for(o=document.createDocumentFragment();Ht(l);)o.appendChild(Ht(l));else o=Ht(l)}var d=o.cloneNode(!0);if(i){var c=Ht(d),p=d.lastChild;An(c,p)}else An(d,d);return d}}function ne(e,t){return Rs(e,t,"svg")}function ui(e=""){{var t=Zt(e+"");return An(t,t),t}}function an(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Zt();return e.append(t,r),An(t,r),e}function D(e,t){e!==null&&e.before(t)}function xe(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Ns(e,t){return Os(e,t)}const bn=new Map;function Os(e,{target:t,anchor:r,props:a={},events:i,context:s,intro:o=!0}){gs();var u=new Set,l=p=>{for(var g=0;g<p.length;g++){var h=p[g];if(!u.has(h)){u.add(h);var L=Cs(h);t.addEventListener(h,Wn,{passive:L});var E=bn.get(h);E===void 0?(document.addEventListener(h,Wn,{passive:L}),bn.set(h,1)):bn.set(h,E+1)}}};l(pr(As)),oa.add(l);var d=void 0,c=ws(()=>{var p=r??t.appendChild(Zt());return ls(p,{pending:()=>{}},g=>{if(s){gt({});var h=We;h.c=s}i&&(a.$$events=i),d=e(g,a)||{},s&&xt()}),()=>{for(var g of u){t.removeEventListener(g,Wn);var h=bn.get(g);--h===0?(document.removeEventListener(g,Wn),bn.delete(g)):bn.set(g,h)}oa.delete(l),p!==r&&p.parentNode?.removeChild(p)}});return $s.set(d,c),d}let $s=new WeakMap;class js{anchor;#t=new Map;#s=new Map;#e=new Map;#a=new Set;#i=!0;constructor(t,r=!0){this.anchor=t,this.#i=r}#r=()=>{var t=Ie;if(this.#t.has(t)){var r=this.#t.get(t),a=this.#s.get(r);if(a)Gr(a),this.#a.delete(r);else{var i=this.#e.get(r);i&&(this.#s.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[s,o]of this.#t){if(this.#t.delete(s),s===t)break;const u=this.#e.get(o);u&&(yt(u.effect),this.#e.delete(o))}for(const[s,o]of this.#s){if(s===r||this.#a.has(s))continue;const u=()=>{if(Array.from(this.#t.values()).includes(s)){var d=document.createDocumentFragment();ni(o,d),d.append(Zt()),this.#e.set(s,{effect:o,fragment:d})}else yt(o);this.#a.delete(s),this.#s.delete(s)};this.#i||!a?(this.#a.add(s),yn(o,u,!1)):u()}}};#n=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[a,i]of this.#e)r.includes(a)||(yt(i.effect),this.#e.delete(a))};ensure(t,r){var a=Ie,i=Va();if(r&&!this.#s.has(t)&&!this.#e.has(t))if(i){var s=document.createDocumentFragment(),o=Zt();s.append(o),this.#e.set(t,{effect:Dt(()=>r(o)),fragment:s})}else this.#s.set(t,Dt(()=>r(this.anchor)));if(this.#t.set(a,t),i){for(const[u,l]of this.#s)u===t?a.skipped_effects.delete(l):a.skipped_effects.add(l);for(const[u,l]of this.#e)u===t?a.skipped_effects.delete(l.effect):a.skipped_effects.add(l.effect);a.oncommit(this.#r),a.ondiscard(this.#n)}else this.#r()}}function ye(e,t,r=!1){var a=new js(e),i=r?kn:0;function s(o,u){a.ensure(o,u)}qr(()=>{var o=!1;t((u,l=!0)=>{o=!0,s(l,u)}),o||s(!1,null)},i)}function Re(e,t){return t}function Ws(e,t,r){for(var a=[],i=t.length,s,o=t.length,u=0;u<i;u++){let p=t[u];yn(p,()=>{if(s){if(s.pending.delete(p),s.done.add(p),s.pending.size===0){var g=e.outrogroups;Rr(pr(s.done)),g.delete(s),g.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=a.length===0&&r!==null;if(l){var d=r,c=d.parentNode;xs(c),c.append(d),e.items.clear()}Rr(t,!l)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function Rr(e,t=!0){for(var r=0;r<e.length;r++)yt(e[r],t)}var ca;function ve(e,t,r,a,i,s=null){var o=e,u=new Map,l=(t&Ta)!==0;if(l){var d=e;o=d.appendChild(Zt())}var c=null,p=Ke(()=>{var A=r();return Yr(A)?A:A==null?[]:pr(A)}),g,h=!0;function L(){m.fallback=c,Ys(m,g,o,t,a),c!==null&&(g.length===0?(c.f&Kt)===0?Gr(c):(c.f^=Kt,Yn(c,null,o)):yn(c,()=>{c=null}))}var E=qr(()=>{g=n(p);for(var A=g.length,R=new Set,U=Ie,q=Va(),te=0;te<A;te+=1){var Pe=g[te],be=a(Pe,te),de=h?null:u.get(be);de?(de.v&&Pn(de.v,Pe),de.i&&Pn(de.i,te),q&&U.skipped_effects.delete(de.e)):(de=Bs(u,h?o:ca??=Zt(),Pe,be,te,i,t,r),h||(de.e.f|=Kt),u.set(be,de)),R.add(be)}if(A===0&&s&&!c&&(h?c=Dt(()=>s(o)):(c=Dt(()=>s(ca??=Zt())),c.f|=Kt)),!h)if(q){for(const[Ce,Me]of u)R.has(Ce)||U.skipped_effects.add(Me.e);U.oncommit(L),U.ondiscard(()=>{})}else L();n(p)}),m={effect:E,items:u,outrogroups:null,fallback:c};h=!1}function Ys(e,t,r,a,i){var s=(a&Ki)!==0,o=t.length,u=e.items,l=e.effect.first,d,c=null,p,g=[],h=[],L,E,m,A;if(s)for(A=0;A<o;A+=1)L=t[A],E=i(L,A),m=u.get(E).e,(m.f&Kt)===0&&(m.nodes?.a?.measure(),(p??=new Set).add(m));for(A=0;A<o;A+=1){if(L=t[A],E=i(L,A),m=u.get(E).e,e.outrogroups!==null)for(const Me of e.outrogroups)Me.pending.delete(m),Me.done.delete(m);if((m.f&Kt)!==0)if(m.f^=Kt,m===l)Yn(m,null,r);else{var R=c?c.next:l;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),en(e,c,m),en(e,m,R),Yn(m,R,r),c=m,g=[],h=[],l=c.next;continue}if((m.f&bt)!==0&&(Gr(m),s&&(m.nodes?.a?.unfix(),(p??=new Set).delete(m))),m!==l){if(d!==void 0&&d.has(m)){if(g.length<h.length){var U=h[0],q;c=U.prev;var te=g[0],Pe=g[g.length-1];for(q=0;q<g.length;q+=1)Yn(g[q],U,r);for(q=0;q<h.length;q+=1)d.delete(h[q]);en(e,te.prev,Pe.next),en(e,c,te),en(e,Pe,U),l=U,c=Pe,A-=1,g=[],h=[]}else d.delete(m),Yn(m,l,r),en(e,m.prev,m.next),en(e,m,c===null?e.effect.first:c.next),en(e,c,m),c=m;continue}for(g=[],h=[];l!==null&&l!==m;)(d??=new Set).add(l),h.push(l),l=l.next;if(l===null)continue}(m.f&Kt)===0&&g.push(m),c=m,l=m.next}if(e.outrogroups!==null){for(const Me of e.outrogroups)Me.pending.size===0&&(Rr(pr(Me.done)),e.outrogroups?.delete(Me));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||d!==void 0){var be=[];if(d!==void 0)for(m of d)(m.f&bt)===0&&be.push(m);for(;l!==null;)(l.f&bt)===0&&l!==e.fallback&&be.push(l),l=l.next;var de=be.length;if(de>0){var Ce=(a&Ta)!==0&&o===0?r:null;if(s){for(A=0;A<de;A+=1)be[A].nodes?.a?.measure();for(A=0;A<de;A+=1)be[A].nodes?.a?.fix()}Ws(e,be,Ce)}}s&&Nn(()=>{if(p!==void 0)for(m of p)m.nodes?.a?.apply()})}function Bs(e,t,r,a,i,s,o,u){var l=(o&Hi)!==0?(o&Vi)===0?P(r,!1,!1):_n(r):null,d=(o&Ui)!==0?_n(i):null;return{v:l,i:d,e:Dt(()=>(s(t,l??r,d??i,u),()=>{e.delete(a)}))}}function Yn(e,t,r){if(e.nodes)for(var a=e.nodes.start,i=e.nodes.end,s=t&&(t.f&Kt)===0?t.nodes.start:r;a!==null;){var o=qn(a);if(s.before(a),a===i)return;a=o}}function en(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Fs(e,t,r,a,i){var s=t.$$slots?.[r],o=!1;s===!0&&(s=t.children,o=!0),s===void 0||s(e,o?()=>a:a)}const ua=[...` 	
\r\fÂ \v\uFEFF`];function Xs(e,t,r){var a=e==null?"":""+e;if(r){for(var i in r)if(r[i])a=a?a+" "+i:i;else if(a.length)for(var s=i.length,o=0;(o=a.indexOf(i,o))>=0;){var u=o+s;(o===0||ua.includes(a[o-1]))&&(u===a.length||ua.includes(a[u]))?a=(o===0?"":a.substring(0,o))+a.substring(u+1):o=u}}return a===""?null:a}function Hs(e,t){return e==null?null:String(e)}function Ct(e,t,r,a,i,s){var o=e.__className;if(o!==r||o===void 0){var u=Xs(r,a,s);u==null?e.removeAttribute("class"):t?e.className=u:e.setAttribute("class",u),e.__className=r}else if(s&&i!==s)for(var l in s){var d=!!s[l];(i==null||d!==!!i[l])&&e.classList.toggle(l,d)}return s}function Us(e,t,r,a){var i=e.__style;if(i!==t){var s=Hs(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return a}const Ks=Symbol("is custom element"),Vs=Symbol("is html");function f(e,t,r,a){var i=Zs(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Ii]=r),r==null?e.removeAttribute(t):typeof r!="string"&&zs(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Zs(e){return e.__attributes??={[Ks]:e.nodeName.includes("-"),[Vs]:e.namespaceURI===Ji}}var da=new Map;function zs(e){var t=e.getAttribute("is")||e.nodeName,r=da.get(t);if(r)return r;da.set(t,r=[]);for(var a,i=e,s=Element.prototype;s!==i;){a=ba(i);for(var o in a)a[o].set&&r.push(o);i=Br(i)}return r}function Sr(e,t,r=t){var a=new WeakSet;Za(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=Mr(e)?Er(s):s,r(s),Ie!==null&&a.add(Ie),await Ds(),s!==(s=t())){var o=e.selectionStart,u=e.selectionEnd,l=e.value.length;if(e.value=s??"",u!==null){var d=e.value.length;o===u&&u===l&&d>l?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(u,d))}}}),v(t)==null&&e.value&&(r(Mr(e)?Er(e.value):e.value),Ie!==null&&a.add(Ie)),On(()=>{var i=t();if(e===document.activeElement){var s=nr??Ie;if(a.has(s))return}Mr(e)&&i===Er(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function di(e,t,r=t){Za(e,"change",a=>{var i=a?e.defaultChecked:e.checked;r(i)}),v(t)==null&&r(e.checked),On(()=>{var a=t();e.checked=!!a})}function Mr(e){var t=e.type;return t==="number"||t==="range"}function Er(e){return e===""?null:+e}function qs(e,t,r){var a=vn(e,t);a&&a.set&&(e[t]=r,wr(()=>{e[t]=null}))}function fa(e,t){return e===t||e?.[hn]===t}function fi(e={},t,r,a){return bs(()=>{var i,s;return On(()=>{i=s,s=[],v(()=>{e!==r(...s)&&(t(e,...s),i&&fa(r(...i),e)&&t(null,...i))})}),()=>{Nn(()=>{s&&fa(r(...s),e)&&t(null,...s)})}}),e}function va(e){return function(...t){var r=t[0];return r.stopPropagation(),e?.apply(this,t)}}function Lt(e=!1){const t=We,r=t.l.u;if(!r)return;let a=()=>O(t.s);if(e){let i=0,s={};const o=Vr(()=>{let u=!1;const l=t.s;for(const d in l)l[d]!==s[d]&&(s[d]=l[d],u=!0);return u&&i++,i});a=()=>n(o)}r.b.length&&ms(()=>{ha(t,a),or(r.b)}),Ar(()=>{const i=v(()=>r.m.map(Ci));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&Ar(()=>{ha(t,a),or(r.a)})}function ha(e,t){if(e.l.s)for(const r of e.l.s)n(r);t()}function ya(e,t){var r=e.$$events?.[t.type],a=Yr(r)?r.slice():r==null?[]:[r];for(var i of a)i.call(this,t)}function Jr(e,t,r){if(e==null)return t(void 0),r&&r(void 0),tn;const a=v(()=>e.subscribe(t,r));return a.unsubscribe?()=>a.unsubscribe():a}const Ln=[];function Gs(e,t){return{subscribe:it(e,t).subscribe}}function it(e,t=tn){let r=null;const a=new Set;function i(u){if(Ca(e,u)&&(e=u,r)){const l=!Ln.length;for(const d of a)d[1](),Ln.push(d,e);if(l){for(let d=0;d<Ln.length;d+=2)Ln[d][0](Ln[d+1]);Ln.length=0}}}function s(u){i(u(e))}function o(u,l=tn){const d=[u,l];return a.add(d),a.size===1&&(r=t(i,s)||tn),u(e),()=>{a.delete(d),a.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function wn(e,t,r){const a=!Array.isArray(e),i=a?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return Gs(r,(o,u)=>{let l=!1;const d=[];let c=0,p=tn;const g=()=>{if(c)return;p();const L=t(a?d[0]:d,o,u);s?o(L):p=typeof L=="function"?L:tn},h=i.map((L,E)=>Jr(L,m=>{d[E]=m,c&=~(1<<E),l&&g()},()=>{c|=1<<E}));return l=!0,g(),function(){or(h),p(),l=!1}})}function fr(e){let t;return Jr(e,r=>t=r)(),t}let Qn=!1,Nr=Symbol();function Oe(e,t,r){const a=r[t]??={store:null,source:P(void 0),unsubscribe:tn};if(a.store!==e&&!(Nr in r))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=tn;else{var i=!0;a.unsubscribe=Jr(e,s=>{i?a.source.v=s:_(a.source,s)}),i=!1}return e&&Nr in r?fr(e):n(a.source)}function Js(e,t){return e.set(t),t}function br(){const e={};function t(){wr(()=>{for(var r in e)e[r].unsubscribe();wa(e,Nr,{enumerable:!1,value:!0})})}return[e,t]}function Qs(e){var t=Qn;try{return Qn=!1,[e(),Qn]}finally{Qn=t}}function Z(e,t,r,a){var i=!Rn||(r&Zi)!==0,s=(r&qi)!==0,o=a,u=!0,l=()=>(u&&(u=!1,o=a),o),d;{var c=hn in e||Ai in e;d=vn(e,t)?.set??(c&&t in e?R=>e[t]=R:void 0)}var p,g=!1;[p,g]=Qs(()=>e[t]),p===void 0&&a!==void 0&&(p=l(),d&&(i&&Wi(),d(p)));var h;if(i?h=()=>{var R=e[t];return R===void 0?l():(u=!0,R)}:h=()=>{var R=e[t];return R!==void 0&&(o=void 0),R===void 0?o:R},i&&(r&zi)===0)return h;if(d){var L=e.$$legacy;return(function(R,U){return arguments.length>0?((!i||!U||L||g)&&d(U?h():R),R):h()})}var E=!1,m=Ke(()=>(E=!1,h()));n(m);var A=De;return(function(R,U){if(arguments.length>0){const q=U?n(m):i&&s?Mn(R):R;return _(m,q),E=!0,o!==void 0&&(o=q),R}return sn&&E||(A.f&Vt)!==0?m.v:n(m)})}function Gn(e){We===null&&ka(),Rn&&We.l!==null?eo(We).m.push(e):Ar(()=>{const t=v(e);if(typeof t=="function")return t})}function vi(e){We===null&&ka(),Gn(()=>()=>v(e))}function eo(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const to="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(to);ts();function no(e,t,r,a){const i=er(r,a,e),s=er(r,a,t),o=er(e,t,r),u=er(e,t,a);return!!((i>0&&s<0||i<0&&s>0)&&(o>0&&u<0||o<0&&u>0)||i===0&&tr(r,a,e)||s===0&&tr(r,a,t)||o===0&&tr(e,t,r)||u===0&&tr(e,t,a))}function er(e,t,r){return(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y)}function tr(e,t,r){return Math.min(e.x,t.x)<=r.x&&r.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=r.y&&r.y<=Math.max(e.y,t.y)}function ga(e,t,r,a=16){const i=[];for(let s=0;s<a;s++){const o=2*Math.PI*s/a;i.push({x:e+r*Math.cos(o),y:t+r*Math.sin(o)})}return i}function ro(e,t,r,a,i=0,s=16){const o=[],u=i*Math.PI/180,l=Math.cos(u),d=Math.sin(u);for(let c=0;c<s;c++){const p=2*Math.PI*c/s,g=r*Math.cos(p),h=a*Math.sin(p);o.push({x:e+g*l-h*d,y:t+g*d+h*l})}return o}function vr(e,t,r){const a=r.length;for(let i=0;i<a;i++){const s=r[i],o=r[(i+1)%a];if(no(e,t,s,o))return!0}return!1}function hi(e,t,r){const a=r*Math.PI/180,i=Math.cos(a),s=Math.sin(a),o=e.x-t.x,u=e.y-t.y;return{x:t.x+o*i-u*s,y:t.y+o*s+u*i}}function yi(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Or(e){const t=yi(e),r=e.rotation||0;return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}].map(i=>hi(i,t,r))}function ao(e){const i=e.x,s=e.y+e.height;return[{x:i,y:s},{x:i,y:s-8},{x:i+.5,y:s-8},{x:i+.5,y:s-.5},{x:i+4,y:s-.5},{x:i+4,y:s}]}function io(e){const t=ao(e),r=yi(e),a=e.rotation||0;return t.map(i=>hi(i,r,a))}const kr=16;function Vn(e){return e.radius!==void 0?ga(e.x,e.y,e.radius,kr):e.rx!==void 0&&e.ry!==void 0?ro(e.x,e.y,e.rx,e.ry,e.rotation||0,kr):ga(e.x,e.y,.5,kr)}function hr(e,t){const r=Vn(e);for(const a of r)if(xa(a,t))return!0;return!!xa({x:e.x,y:e.y},t)}function xa(e,t){const r=t.length;let a=null;for(let i=0;i<r;i++){const s=t[i],o=t[(i+1)%r],u=(o.x-s.x)*(e.y-s.y)-(o.y-s.y)*(e.x-s.x);if(u!==0){const l=u>0;if(a===null)a=l;else if(a!==l)return!1}}return!0}function so(e,t,r,a){const i=Vn(e),s=Vn(t),o=new Set;for(const c of r){const p=hr(e,c.vertices),g=hr(t,c.vertices);(p||g)&&o.add(c.id)}const u=[];let l=!1,d=null;for(const c of i)for(const p of s){const g={from:c,to:p,blocked:!1,blockedBy:null};let h=!1;for(const E of r)if(!o.has(E.id)&&vr(c,p,E.vertices)){g.blocked=!0,g.blockedBy="terrain",h=!0;break}if(h){u.push(g);continue}let L=!1;for(const E of a)if(vr(c,p,E)){g.blocked=!0,g.blockedBy="wall",L=!0;break}L||(g.blocked=!1,l||(d=g),l=!0),u.push(g)}return{canSee:l,rays:u,firstClearRay:d,terrainsIgnored:Array.from(o)}}function oo(e,t,r,a){const i=Vn(e),s=Vn(t),o=new Set;for(const u of r){const l=hr(e,u.vertices),d=hr(t,u.vertices);(l||d)&&o.add(u.id)}for(const u of i)for(const l of s){let d=!1;for(const c of r)if(!o.has(c.id)&&vr(u,l,c.vertices)){d=!0;break}if(!d){for(const c of a)if(vr(u,l,c)){d=!0;break}if(!d)return!0}}return!1}const V={width:60,height:44},pa=.63,_a=it([{id:"unit1",x:10,y:22,radius:pa,color:"#3b82f6"},{id:"unit2",x:50,y:22,radius:pa,color:"#ef4444"}]),Un=it([{id:"terrain1",x:20,y:16,width:6,height:12,rotation:0},{id:"terrain2",x:34,y:10,width:6,height:12,rotation:45},{id:"terrain3",x:44,y:20,width:6,height:12,rotation:-30}]),lo=wn(Un,e=>e.map(t=>io(t))),co=wn(Un,e=>e.map(t=>({id:t.id,vertices:Or(t)}))),ma=it(!1);var uo=ne('<line stroke="#3a4a3a" stroke-width="0.05"></line>'),fo=ne('<line stroke="#3a4a3a" stroke-width="0.05"></line>'),vo=ne('<line stroke="#5a6a5a" stroke-width="0.08"></line>'),ho=ne('<line stroke="#5a6a5a" stroke-width="0.08"></line>'),yo=ne('<text text-anchor="middle" class="ruler-text svelte-n43bnt"> </text>'),go=ne('<line stroke="#666"></line><!>',1),xo=ne('<text text-anchor="middle" class="ruler-text svelte-n43bnt"> </text>'),po=ne('<line stroke="#666"></line><!>',1),_o=ne('<text text-anchor="middle" class="ruler-text svelte-n43bnt"> </text>'),mo=ne('<line stroke="#666"></line><!>',1),wo=ne('<text text-anchor="middle" class="ruler-text svelte-n43bnt"> </text>'),bo=ne('<line stroke="#666"></line><!>',1),Lo=ne('<svg preserveAspectRatio="xMidYMid meet"><rect x="0" y="0" fill="#1a1a1a"></rect><rect fill="#4a5a4a"></rect><!><!><!><!><!><!><!><!><g><!></g></svg>');function Lr(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P(),u=P(),l=P();let d=P();const c=2,p=V.width+c*2,g=V.height+c*2;let h=P(1),L=P(0),E=P(0),m=P(!1),A={x:0,y:0},R=P(!1);const U=.5,q=4;function te(k,T){if(!n(d))return{x:0,y:0};const Q=n(d).createSVGPoint();Q.x=k,Q.y=T;const I=Q.matrixTransform(n(d).getScreenCTM().inverse());return{x:I.x-c,y:I.y-c}}function Pe(k){k.preventDefault();const T=n(d).getBoundingClientRect(),Q=k.clientX-T.left,I=k.clientY-T.top,Ae=n(i)+Q/T.width*n(r),se=n(s)+I/T.height*n(a),ge=k.deltaY>0?.9:1.1,oe=Math.max(U,Math.min(q,n(h)*ge)),Te=p/oe,ke=g/oe,Ze=Ae-Q/T.width*Te,pt=se-I/T.height*ke;_(h,oe),_(L,Ze),_(E,pt)}function be(k){(k.button===1||k.button===0&&n(R))&&(k.preventDefault(),_(m,!0),A={x:k.clientX,y:k.clientY})}function de(k){if(!n(m))return;const T=n(d).getBoundingClientRect(),Q=(k.clientX-A.x)/T.width*n(r),I=(k.clientY-A.y)/T.height*n(a);_(L,n(L)-Q),_(E,n(E)-I),A={x:k.clientX,y:k.clientY}}function Ce(){_(m,!1)}function Me(k){k.code==="Space"&&!k.repeat&&k.target.tagName!=="INPUT"&&(k.preventDefault(),_(R,!0))}function _e(k){k.code==="Space"&&_(R,!1)}function le(){_(h,1),_(L,0),_(E,0)}H(()=>n(h),()=>{_(r,p/n(h))}),H(()=>n(h),()=>{_(a,g/n(h))}),H(()=>n(L),()=>{_(i,n(L))}),H(()=>n(E),()=>{_(s,n(E))}),H(()=>(n(i),n(s),n(r),n(a)),()=>{_(o,`${n(i)} ${n(s)} ${n(r)} ${n(a)}`)}),H(()=>V,()=>{_(u,Array.from({length:V.width+1},(k,T)=>T))}),H(()=>V,()=>{_(l,Array.from({length:V.height+1},(k,T)=>T))}),Yt();var je={screenToSvg:te};Lt();var he=Lo();X("keydown",En,Me),X("keyup",En,_e),X("mouseup",En,Ce),X("mousemove",En,de);let me;var $e=x(he),ce=y($e);f(ce,"x",c),f(ce,"y",c);var z=y(ce);ve(z,1,()=>(O(V),v(()=>Array(V.width+1))),Re,(k,T,Q)=>{var I=uo();f(I,"x1",c+Q),f(I,"y1",c),f(I,"x2",c+Q),Y(()=>f(I,"y2",(O(V),v(()=>c+V.height)))),D(k,I)});var fe=y(z);ve(fe,1,()=>(O(V),v(()=>Array(V.height+1))),Re,(k,T,Q)=>{var I=fo();f(I,"x1",c),f(I,"y1",c+Q),f(I,"y2",c+Q),Y(()=>f(I,"x2",(O(V),v(()=>c+V.width)))),D(k,I)});var ue=y(fe);ve(ue,1,()=>(O(V),v(()=>Array(Math.floor(V.width/6)+1))),Re,(k,T,Q)=>{var I=vo();f(I,"x1",c+Q*6),f(I,"y1",c),f(I,"x2",c+Q*6),Y(()=>f(I,"y2",(O(V),v(()=>c+V.height)))),D(k,I)});var ae=y(ue);ve(ae,1,()=>(O(V),v(()=>Array(Math.floor(V.height/6)+1))),Re,(k,T,Q)=>{var I=ho();f(I,"x1",c),f(I,"y1",c+Q*6),f(I,"y2",c+Q*6),Y(()=>f(I,"x2",(O(V),v(()=>c+V.width)))),D(k,I)});var Ee=y(ae);ve(Ee,1,()=>n(u),Re,(k,T)=>{var Q=go(),I=Ne(Q);f(I,"y2",c);var Ae=y(I);{var se=ge=>{var oe=yo();f(oe,"y",1.2);var Te=x(oe);Y(()=>{f(oe,"x",c+n(T)),xe(Te,`${n(T)??""}"`)}),D(ge,oe)};ye(Ae,ge=>{n(T)%6===0&&ge(se)})}Y(()=>{f(I,"x1",c+n(T)),f(I,"y1",n(T)%6===0?.5:c-.8),f(I,"x2",c+n(T)),f(I,"stroke-width",n(T)%6===0?.08:.04)}),D(k,Q)});var et=y(Ee);ve(et,1,()=>n(u),Re,(k,T)=>{var Q=po(),I=Ne(Q),Ae=y(I);{var se=ge=>{var oe=xo(),Te=x(oe);Y(()=>{f(oe,"x",c+n(T)),f(oe,"y",(O(V),v(()=>c+V.height+1.8))),xe(Te,`${n(T)??""}"`)}),D(ge,oe)};ye(Ae,ge=>{n(T)%6===0&&ge(se)})}Y(()=>{f(I,"x1",c+n(T)),f(I,"y1",(O(V),v(()=>c+V.height))),f(I,"x2",c+n(T)),f(I,"y2",(O(V),n(T),v(()=>c+V.height+(n(T)%6===0?1.5:.8)))),f(I,"stroke-width",n(T)%6===0?.08:.04)}),D(k,Q)});var tt=y(et);ve(tt,1,()=>n(l),Re,(k,T)=>{var Q=mo(),I=Ne(Q);f(I,"x2",c);var Ae=y(I);{var se=ge=>{var oe=_o();f(oe,"x",1);var Te=x(oe);Y(()=>{f(oe,"y",c+n(T)+.35),xe(Te,`${n(T)??""}"`)}),D(ge,oe)};ye(Ae,ge=>{n(T)%6===0&&ge(se)})}Y(()=>{f(I,"x1",n(T)%6===0?.5:c-.8),f(I,"y1",c+n(T)),f(I,"y2",c+n(T)),f(I,"stroke-width",n(T)%6===0?.08:.04)}),D(k,Q)});var w=y(tt);ve(w,1,()=>n(l),Re,(k,T)=>{var Q=bo(),I=Ne(Q),Ae=y(I);{var se=ge=>{var oe=wo(),Te=x(oe);Y(()=>{f(oe,"x",(O(V),v(()=>c+V.width+1))),f(oe,"y",c+n(T)+.35),xe(Te,`${n(T)??""}"`)}),D(ge,oe)};ye(Ae,ge=>{n(T)%6===0&&ge(se)})}Y(()=>{f(I,"x1",(O(V),v(()=>c+V.width))),f(I,"y1",c+n(T)),f(I,"x2",(O(V),n(T),v(()=>c+V.width+(n(T)%6===0?1.5:.8)))),f(I,"y2",c+n(T)),f(I,"stroke-width",n(T)%6===0?.08:.04)}),D(k,Q)});var b=y(w);f(b,"transform","translate(2, 2)");var j=x(b);return Fs(j,t,"default",{screenToSvg:te}),fi(he,k=>_(d,k),()=>n(d)),Y(()=>{f(he,"viewBox",n(o)),me=Ct(he,0,"battlefield svelte-n43bnt",null,me,{panning:n(m)||n(R)}),f($e,"width",(O(V),v(()=>V.width+c*2))),f($e,"height",(O(V),v(()=>V.height+c*2))),f(ce,"width",(O(V),v(()=>V.width))),f(ce,"height",(O(V),v(()=>V.height)))}),X("wheel",he,Pe),X("mousedown",he,be),X("dblclick",he,le),D(e,he),qs(t,"screenToSvg",te),xt(je)}var So=ne('<line stroke="#3b82f6" stroke-width="0.08" stroke-dasharray="0.2,0.1"></line><circle r="0.6" fill="#3b82f6" stroke="#1d4ed8" stroke-width="0.08" role="button" tabindex="0" class="rotate-handle svelte-trljjm"></circle>',1),Mo=ne('<g><g><rect role="button" tabindex="0" class="svelte-trljjm"></rect></g><!></g>');function gi(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P();let u=Z(t,"id",8),l=Z(t,"x",8),d=Z(t,"y",8),c=Z(t,"width",8),p=Z(t,"height",8),g=Z(t,"rotation",8,0),h=Z(t,"selected",8,!1),L=Z(t,"screenToSvg",8),E=Z(t,"onSelect",8,()=>{}),m=Z(t,"onDrag",8,()=>{}),A=Z(t,"onRotate",8,()=>{}),R=P(!1),U=!1,q={x:0,y:0};function te(z){z.stopPropagation(),E()(u())}function Pe(z){if(z.button!==0)return;z.preventDefault(),z.stopPropagation(),E()(u()),_(R,!0);const fe=L()(z.clientX,z.clientY);q={x:fe.x-l(),y:fe.y-d()},window.addEventListener("mousemove",be),window.addEventListener("mouseup",de)}function be(z){if(!n(R))return;const fe=L()(z.clientX,z.clientY);let ue=fe.x-q.x,ae=fe.y-q.y;z.shiftKey||(ue=Math.round(ue),ae=Math.round(ae));const Ee=Math.max(c(),p())/2;ue=Math.max(-Ee,Math.min(V.width-c()+Ee,ue)),ae=Math.max(-Ee,Math.min(V.height-p()+Ee,ae)),m()(u(),ue,ae)}function de(){_(R,!1),window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",de)}function Ce(z){z.preventDefault(),z.stopPropagation(),U=!0,window.addEventListener("mousemove",Me),window.addEventListener("mouseup",_e)}function Me(z){if(!U)return;const fe=L()(z.clientX,z.clientY),ue=fe.x-n(r),ae=fe.y-n(a);let Ee=Math.atan2(ae,ue)*180/Math.PI+45;z.shiftKey||(Ee=Math.round(Ee/15)*15),A()(u(),Ee)}function _e(){U=!1,window.removeEventListener("mousemove",Me),window.removeEventListener("mouseup",_e)}H(()=>(O(l()),O(c())),()=>{_(r,l()+c()/2)}),H(()=>(O(d()),O(p())),()=>{_(a,d()+p()/2)}),H(()=>(O(c()),O(p())),()=>{_(i,Math.max(c(),p())/2+1.5)}),H(()=>(n(r),n(i),O(g())),()=>{_(s,n(r)+n(i)*Math.cos((g()-45)*Math.PI/180))}),H(()=>(n(a),n(i),O(g())),()=>{_(o,n(a)+n(i)*Math.sin((g()-45)*Math.PI/180))}),Yt(),Lt();var le=Mo();let je;var he=x(le),me=x(he),$e=y(he);{var ce=z=>{var fe=So(),ue=Ne(fe),ae=y(ue);Y(()=>{f(ue,"x1",n(r)),f(ue,"y1",n(a)),f(ue,"x2",n(s)),f(ue,"y2",n(o)),f(ae,"cx",n(s)),f(ae,"cy",n(o))}),X("mousedown",ae,Ce),D(z,fe)};ye($e,z=>{h()&&z(ce)})}Y(()=>{je=Ct(le,0,"terrain-rect svelte-trljjm",null,je,{selected:h(),dragging:n(R)}),f(he,"transform",`rotate(${g()??""}, ${n(r)??""}, ${n(a)??""})`),f(me,"x",l()),f(me,"y",d()),f(me,"width",c()),f(me,"height",p()),f(me,"fill",h()?"rgba(59, 130, 246, 0.3)":"rgba(139, 90, 43, 0.3)"),f(me,"stroke",h()?"#3b82f6":"#8b5a2b"),f(me,"stroke-width",h()?.15:.1)}),X("click",me,te),X("mousedown",me,Pe),D(e,le),xt()}var Eo=ne('<line stroke="#3b82f6" stroke-width="0.08" stroke-dasharray="0.2,0.1"></line><circle r="0.6" fill="#3b82f6" stroke="#1d4ed8" stroke-width="0.08" role="button" tabindex="0" class="rotate-handle svelte-1tez9jd"></circle>',1),ko=ne('<g><g><path role="button" tabindex="0" class="svelte-1tez9jd"></path></g><!></g>');function Qr(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P(),u=P(),l=P(),d=P(),c=P(),p=P();let g=Z(t,"id",8),h=Z(t,"x",8),L=Z(t,"y",8),E=Z(t,"shape",8),m=Z(t,"rotation",8,0),A=Z(t,"selected",8,!1),R=Z(t,"screenToSvg",8),U=Z(t,"onSelect",8,()=>{}),q=Z(t,"onDrag",8,()=>{}),te=Z(t,"onRotate",8,()=>{});const Pe=.5;function be(w){const b=Pe;switch(w){case"L-4x8":return[{x:0,y:0},{x:b,y:0},{x:b,y:8-b},{x:4,y:8-b},{x:4,y:8},{x:0,y:8}];case"L-4x8-mirror":return[{x:0,y:0},{x:b,y:0},{x:b,y:8},{x:-4+b,y:8},{x:-4+b,y:8-b},{x:0,y:8-b}];case"C-4-8-4":return[{x:0,y:0},{x:4,y:0},{x:4,y:b},{x:b,y:b},{x:b,y:8-b},{x:4,y:8-b},{x:4,y:8},{x:0,y:8}];case"L-5x6":return[{x:0,y:0},{x:b,y:0},{x:b,y:6-b},{x:5,y:6-b},{x:5,y:6},{x:0,y:6}];case"L-5x6-mirror":return[{x:0,y:0},{x:b,y:0},{x:b,y:6},{x:-5+b,y:6},{x:-5+b,y:6-b},{x:0,y:6-b}];case"L-4x6":return[{x:0,y:0},{x:b,y:0},{x:b,y:6-b},{x:4,y:6-b},{x:4,y:6},{x:0,y:6}];case"L-4x6-mirror":return[{x:0,y:0},{x:b,y:0},{x:b,y:6},{x:-4+b,y:6},{x:-4+b,y:6-b},{x:0,y:6-b}];default:return[]}}function de(w){const b=w.map(k=>k.x),j=w.map(k=>k.y);return{minX:Math.min(...b),maxX:Math.max(...b),minY:Math.min(...j),maxY:Math.max(...j)}}let Ce=P(!1),Me=!1,_e={x:0,y:0};function le(w){w.stopPropagation(),U()(g())}function je(w){if(w.button!==0)return;w.preventDefault(),w.stopPropagation(),U()(g()),_(Ce,!0);const b=R()(w.clientX,w.clientY);_e={x:b.x-h(),y:b.y-L()},window.addEventListener("mousemove",he),window.addEventListener("mouseup",me)}function he(w){if(!n(Ce))return;const b=R()(w.clientX,w.clientY);let j=b.x-_e.x,k=b.y-_e.y;w.shiftKey||(j=Math.round(j),k=Math.round(k));const T=Math.max(n(i),n(s));j=Math.max(-T,Math.min(V.width+T-n(i),j)),k=Math.max(-T,Math.min(V.height+T-n(s),k)),q()(g(),j,k)}function me(){_(Ce,!1),window.removeEventListener("mousemove",he),window.removeEventListener("mouseup",me)}function $e(w){w.preventDefault(),w.stopPropagation(),Me=!0,window.addEventListener("mousemove",ce),window.addEventListener("mouseup",z)}function ce(w){if(!Me)return;const b=R()(w.clientX,w.clientY),j=b.x-n(o),k=b.y-n(u);let T=Math.atan2(k,j)*180/Math.PI+45;w.shiftKey||(T=Math.round(T/15)*15),te()(g(),T)}function z(){Me=!1,window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",z)}H(()=>O(E()),()=>{_(r,be(E()))}),H(()=>n(r),()=>{_(a,de(n(r)))}),H(()=>n(a),()=>{_(i,n(a).maxX-n(a).minX)}),H(()=>n(a),()=>{_(s,n(a).maxY-n(a).minY)}),H(()=>(O(h()),n(a),n(i)),()=>{_(o,h()+n(a).minX+n(i)/2)}),H(()=>(O(L()),n(a),n(s)),()=>{_(u,L()+n(a).minY+n(s)/2)}),H(()=>(n(r),O(h()),O(L())),()=>{_(l,n(r).length>0?`M ${n(r).map(w=>`${h()+w.x},${L()+w.y}`).join(" L ")} Z`:"")}),H(()=>(n(i),n(s)),()=>{_(d,Math.max(n(i),n(s))/2+1.5)}),H(()=>(n(o),n(d),O(m())),()=>{_(c,n(o)+n(d)*Math.cos((m()-45)*Math.PI/180))}),H(()=>(n(u),n(d),O(m())),()=>{_(p,n(u)+n(d)*Math.sin((m()-45)*Math.PI/180))}),Yt(),Lt();var fe=ko();let ue;var ae=x(fe),Ee=x(ae),et=y(ae);{var tt=w=>{var b=Eo(),j=Ne(b),k=y(j);Y(()=>{f(j,"x1",n(o)),f(j,"y1",n(u)),f(j,"x2",n(c)),f(j,"y2",n(p)),f(k,"cx",n(c)),f(k,"cy",n(p))}),X("mousedown",k,$e),D(w,b)};ye(et,w=>{A()&&w(tt)})}Y(()=>{ue=Ct(fe,0,"wall-piece svelte-1tez9jd",null,ue,{selected:A(),dragging:n(Ce)}),f(ae,"transform",`rotate(${m()??""}, ${n(o)??""}, ${n(u)??""})`),f(Ee,"d",n(l)),f(Ee,"fill",A()?"rgba(139, 69, 19, 0.6)":"rgba(139, 69, 19, 0.8)"),f(Ee,"stroke",A()?"#3b82f6":"#5c3317"),f(Ee,"stroke-width",A()?.15:.1)}),X("click",Ee,le),X("mousedown",Ee,je),D(e,fe),xt()}const xi="warhammer-deployment-layouts",pi=[{label:'6" x 12"',width:6,height:12},{label:'5" x 10"',width:5,height:10},{label:'4" x 6"',width:4,height:6}],$r=[{label:"L 4x8",shape:"L-4x8"},{label:"L 4x8 â",shape:"L-4x8-mirror"},{label:"C 4-8-4",shape:"C-4-8-4"},{label:"L 5x6",shape:"L-5x6"},{label:"L 5x6 â",shape:"L-5x6-mirror"},{label:"L 4x6",shape:"L-4x6"},{label:"L 4x6 â",shape:"L-4x6-mirror"}],_i=[{name:"Layout 1",terrains:[{id:"a",x:28,y:0,width:4,height:6,rotation:0},{id:"b",x:28,y:38,width:4,height:6,rotation:0},{id:"c",x:6,y:5,width:6,height:12,rotation:0},{id:"d",x:48,y:27,width:6,height:12,rotation:0},{id:"e",x:16,y:28,width:6,height:12,rotation:0},{id:"f",x:7,y:19,width:6,height:12,rotation:90},{id:"g",x:38,y:4,width:6,height:12,rotation:0},{id:"h",x:47,y:13,width:6,height:12,rotation:90},{id:"i",x:32.74,y:23.59,width:5,height:10,rotation:135},{id:"j",x:35.06,y:19.5,width:4,height:6,rotation:45},{id:"k",x:22.07,y:10.17,width:5,height:10,rotation:-45},{id:"l",x:20.72,y:18.23,width:4,height:6,rotation:45}],walls:[{id:"wa",x:38,y:6,shape:"C-4-8-4",rotation:0},{id:"wb",x:18,y:30,shape:"C-4-8-4",rotation:180},{id:"wc",x:13.33,y:20.15,shape:"L-4x8-mirror",rotation:-90},{id:"wd",x:49.67,y:15.93,shape:"L-4x8-mirror",rotation:90},{id:"we",x:48.2,y:30.88,shape:"L-4x8",rotation:0},{id:"wf",x:7.84,y:5.01,shape:"L-4x8",rotation:180},{id:"wg",x:27.06,y:11.52,shape:"L-4x8-mirror",rotation:-45},{id:"wh",x:35.81,y:24.24,shape:"L-4x8-mirror",rotation:135}]},{name:"Layout 2",terrains:[{id:"a",x:31,y:7,width:4,height:6,rotation:-90},{id:"b",x:25,y:30,width:4,height:6,rotation:90},{id:"c",x:5,y:4,width:6,height:12,rotation:0},{id:"d",x:49,y:28,width:6,height:12,rotation:0},{id:"e",x:46,y:4,width:6,height:12,rotation:0},{id:"f",x:16.32,y:16.13,width:6,height:12,rotation:135},{id:"g",x:53,y:15,width:4,height:6,rotation:90},{id:"h",x:8,y:28,width:6,height:12,rotation:0},{id:"i",x:3,y:23,width:4,height:6,rotation:90},{id:"j",x:32.62,y:32.55,width:5,height:10,rotation:-90},{id:"k",x:22.48,y:.51,width:5,height:10,rotation:-90},{id:"l",x:37,y:16,width:6,height:12,rotation:135}],walls:[{id:"wa",x:49,y:32,shape:"L-4x8",rotation:0},{id:"wb",x:7,y:4,shape:"L-4x8",rotation:180},{id:"wc",x:46,y:8,shape:"L-4x8",rotation:0},{id:"wd",x:10,y:28,shape:"L-4x8",rotation:180},{id:"we",x:35.07,y:34.56,shape:"L-5x6-mirror",rotation:-90},{id:"wf",x:29.09,y:2.47,shape:"L-5x6-mirror",rotation:90},{id:"wg",x:17.86,y:17.53,shape:"C-4-8-4",rotation:135},{id:"wh",x:37.24,y:18.38,shape:"C-4-8-4",rotation:-45}]},{name:"Layout 3",terrains:[{id:"a",x:11,y:3,width:4,height:6,rotation:90},{id:"b",x:45,y:35,width:4,height:6,rotation:90},{id:"c",x:25,y:1,width:6,height:12,rotation:90},{id:"d",x:29,y:31,width:6,height:12,rotation:90},{id:"e",x:7.74,y:26.05,width:6,height:12,rotation:125.31},{id:"f",x:46.34,y:5.51,width:6,height:12,rotation:121.72},{id:"g",x:5.14,y:10.46,width:6,height:12,rotation:41.51},{id:"h",x:48.67,y:21.52,width:6,height:12,rotation:41.51},{id:"i",x:19.59,y:14.36,width:5,height:10,rotation:-38.13},{id:"j",x:20.69,y:24.37,width:4,height:6,rotation:-39.33},{id:"k",x:35.34,y:19.61,width:5,height:10,rotation:-38.13},{id:"l",x:35.31,y:13.5,width:4,height:6,rotation:-39.33}],walls:[{id:"aa",x:30,y:32,shape:"C-4-8-4",rotation:90},{id:"ab",x:26,y:4,shape:"C-4-8-4",rotation:-90},{id:"ac",x:8.19,y:11.64,shape:"L-4x8",rotation:222.46},{id:"ad",x:47.79,y:24.3,shape:"L-4x8",rotation:41.26},{id:"ae",x:38.64,y:20.09,shape:"L-5x6-mirror",rotation:141.31},{id:"af",x:25.26,y:17.9,shape:"L-5x6-mirror",rotation:-37.61},{id:"ag",x:14.37,y:28.38,shape:"L-4x8-mirror",rotation:-54.26},{id:"ah",x:48.75,y:7.3,shape:"L-4x8-mirror",rotation:122.02}]},{name:"Layout 4",terrains:[{id:"a",x:15,y:1,width:6,height:12,rotation:90},{id:"b",x:8,y:10,width:4,height:6,rotation:0},{id:"c",x:4,y:19,width:4,height:6,rotation:0},{id:"d",x:7.5,y:27.68,width:6,height:12,rotation:-48.57},{id:"e",x:46.53,y:4.24,width:6,height:12,rotation:-48.57},{id:"f",x:53,y:19,width:4,height:6,rotation:0},{id:"g",x:48,y:28,width:4,height:6,rotation:0},{id:"h",x:39,y:31,width:6,height:12,rotation:90},{id:"i",x:33.03,y:2.97,width:6,height:12,rotation:-37.25},{id:"j",x:20.96,y:28.96,width:6,height:12,rotation:-37.25},{id:"k",x:16.93,y:16.51,width:5,height:10,rotation:-41.85},{id:"l",x:37.96,y:17.43,width:5,height:10,rotation:-41.85}],walls:[{id:"aa",x:18,y:4,shape:"L-4x8",rotation:-90},{id:"ab",x:9.04,y:29.01,shape:"C-4-8-4",rotation:131.97},{id:"ac",x:47,y:7,shape:"C-4-8-4",rotation:-48.54},{id:"ad",x:38,y:32,shape:"L-4x8",rotation:90},{id:"ae",x:34.42,y:7.12,shape:"L-4x8",rotation:-37.53},{id:"af",x:21.57,y:28.8,shape:"L-4x8",rotation:142.46},{id:"ag",x:15.7,y:17.01,shape:"L-5x6",rotation:137.87},{id:"ah",x:39.17,y:20.85,shape:"L-5x6",rotation:-40.92}]},{name:"Layout 5",terrains:[{id:"aa",x:27,y:1,width:6,height:12,rotation:90},{id:"ab",x:36.53,y:12.48,width:5,height:10,rotation:-90},{id:"ac",x:13,y:3,width:4,height:6,rotation:90},{id:"ad",x:43,y:35,width:4,height:6,rotation:90},{id:"ae",x:27,y:31,width:6,height:12,rotation:90},{id:"af",x:18.43,y:21.49,width:5,height:10,rotation:-90},{id:"ag",x:1,y:23,width:4,height:6,rotation:90},{id:"ah",x:55,y:15,width:4,height:6,rotation:90},{id:"ai",x:7.83,y:30.22,width:6,height:12,rotation:-60},{id:"aj",x:46.32,y:1.58,width:6,height:12,rotation:-60},{id:"ak",x:8.74,y:10.19,width:6,height:12,rotation:65.22},{id:"al",x:45.22,y:21.75,width:6,height:12,rotation:65.22}],walls:[{id:"a1",x:28,y:32,shape:"C-4-8-4",rotation:90},{id:"a2",x:28,y:4,shape:"C-4-8-4",rotation:-90},{id:"a3",x:11.88,y:12.29,shape:"L-4x8",rotation:-114.74},{id:"a4",x:43.97,y:23.59,shape:"L-4x8",rotation:64.22},{id:"a5",x:24.91,y:23.52,shape:"L-5x6-mirror",rotation:-90.37},{id:"a6",x:39,y:14.51,shape:"L-5x6-mirror",rotation:89.9},{id:"a7",x:7.58,y:30.57,shape:"L-4x8",rotation:120.93},{id:"a8",x:48.51,y:5.28,shape:"L-4x8",rotation:-59.06}]},{name:"Layout 6",terrains:[{id:"aa",x:13,y:1,width:6,height:12,rotation:90},{id:"ab",x:6,y:10,width:4,height:6,rotation:0},{id:"ac",x:25,y:11,width:4,height:6,rotation:90},{id:"ad",x:7.34,y:27.57,width:6,height:12,rotation:-40.32},{id:"ae",x:46.69,y:4.57,width:6,height:12,rotation:-41.9},{id:"af",x:31,y:27,width:4,height:6,rotation:-90},{id:"ag",x:50,y:28,width:4,height:6,rotation:0},{id:"ah",x:41,y:31,width:6,height:12,rotation:90},{id:"ai",x:34,y:4,width:6,height:12,rotation:0},{id:"aj",x:20,y:28,width:6,height:12,rotation:0},{id:"ak",x:15.7,y:15.03,width:5,height:10,rotation:-41.85},{id:"al",x:39.43,y:19.24,width:5,height:10,rotation:-39.95}],walls:[{id:"a1",x:16,y:4,shape:"L-4x8",rotation:-90},{id:"a2",x:9.04,y:29.01,shape:"C-4-8-4",rotation:140.05},{id:"a3",x:47,y:7.16,shape:"C-4-8-4",rotation:-41.53},{id:"a4",x:40,y:32,shape:"L-4x8",rotation:90},{id:"a5",x:34.15,y:7.88,shape:"L-4x8",rotation:0},{id:"a6",x:22,y:28,shape:"L-4x8",rotation:180},{id:"a7",x:14.47,y:15.47,shape:"L-5x6",rotation:137.87},{id:"a8",x:40.53,y:22.78,shape:"L-5x6",rotation:-40.92}]},{name:"Layout 7",terrains:[{id:"aa",x:8,y:8,width:6,height:12,rotation:0},{id:"ab",x:6,y:28,width:6,height:12,rotation:0},{id:"ac",x:7,y:39,width:4,height:6,rotation:90},{id:"ad",x:18,y:26,width:5,height:10,rotation:0},{id:"ae",x:19,y:20,width:4,height:6,rotation:0},{id:"af",x:23,y:3,width:6,height:12,rotation:0},{id:"ag",x:31,y:29,width:6,height:12,rotation:0},{id:"ah",x:37,y:18,width:4,height:6,rotation:0},{id:"ai",x:37,y:8,width:5,height:10,rotation:0},{id:"aj",x:46,y:24,width:6,height:12,rotation:0},{id:"ak",x:48,y:4,width:6,height:12,rotation:0},{id:"al",x:49,y:-1,width:4,height:6,rotation:90}],walls:[{id:"a1",x:9,y:10,shape:"L-5x6",rotation:180},{id:"a2",x:11.44,y:31.97,shape:"L-4x8-mirror",rotation:0},{id:"a3",x:19,y:20,shape:"L-4x6",rotation:180},{id:"a4",x:22.53,y:30.02,shape:"L-5x6-mirror",rotation:0},{id:"a5",x:25,y:5,shape:"C-4-8-4",rotation:180},{id:"a6",x:31,y:31,shape:"C-4-8-4",rotation:0},{id:"a7",x:37,y:18,shape:"L-4x6",rotation:0},{id:"a8",x:41.51,y:8.09,shape:"L-5x6-mirror",rotation:180},{id:"a9",x:46,y:28,shape:"L-5x6",rotation:0},{id:"a10",x:51.51,y:4.01,shape:"L-4x8-mirror",rotation:180}]},{name:"Layout 8",terrains:[{id:"aa",x:23,y:22,width:4,height:6,rotation:0},{id:"ab",x:23,y:28,width:4,height:6,rotation:0},{id:"ac",x:33,y:16,width:4,height:6,rotation:0},{id:"ad",x:33,y:10,width:4,height:6,rotation:0},{id:"ae",x:41,y:19,width:6,height:12,rotation:0},{id:"af",x:13,y:13,width:6,height:12,rotation:0},{id:"ag",x:32,y:32,width:6,height:12,rotation:0},{id:"ah",x:22,y:0,width:6,height:12,rotation:0},{id:"ai",x:9.5,y:27.68,width:6,height:12,rotation:-48.69},{id:"aj",x:44.51,y:4.35,width:6,height:12,rotation:-48.69},{id:"ak",x:6.95,y:4,width:5,height:10,rotation:53.9},{id:"al",x:48,y:30,width:5,height:10,rotation:53.9}],walls:[{id:"a1",x:32,y:34,shape:"C-4-8-4",rotation:0},{id:"a2",x:24,y:2,shape:"C-4-8-4",rotation:180},{id:"a3",x:44.68,y:19.06,shape:"L-4x8-mirror",rotation:180},{id:"a4",x:18.43,y:16.91,shape:"L-4x8-mirror",rotation:0},{id:"a5",x:46.38,y:33.13,shape:"L-5x6",rotation:52.87},{id:"a6",x:8.55,y:4.89,shape:"L-5x6",rotation:-127.66},{id:"a7",x:16,y:30.28,shape:"L-4x8-mirror",rotation:-48.62},{id:"a8",x:46.91,y:5.85,shape:"L-4x8-mirror",rotation:132.19}]}];function To(){return"terrain-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function Ut(){const e=localStorage.getItem(xi);if(e)try{return JSON.parse(e)}catch(t){return console.error("Failed to parse saved layouts:",t),{}}return{}}function yr(e){localStorage.setItem(xi,JSON.stringify(e))}function Do(){const{subscribe:e,set:t,update:r}=it([]);return{subscribe:e,set:t,update:r,add(a,i){r(s=>[...s,{id:To(),x:30-a/2,y:22-i/2,width:a,height:i,rotation:0}])},updateTerrain(a,i){r(s=>s.map(o=>o.id===a?{...o,...i}:o))},remove(a){r(i=>i.filter(s=>s.id!==a))},clear(){t([])},save(a){const i=fr({subscribe:e}),s=Ut();s[a]={terrains:i,savedAt:Date.now()},yr(s)},load(a){const i=Ut();return i[a]?(t(i[a].terrains),!0):!1},deleteLayout(a){const i=Ut();delete i[a],yr(i)},getSavedLayoutNames(){const a=Ut();return Object.keys(a).map(i=>({name:i,savedAt:a[i].savedAt,terrainCount:a[i].terrains.length})).sort((i,s)=>s.savedAt-i.savedAt)},hasSaved(){const a=Ut();return Object.keys(a).length>0}}}const at=Do();function Po(){const{subscribe:e,set:t,update:r}=it([]);return{subscribe:e,set:t,update:r,add(a){r(i=>[...i,{id:"wall-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),x:30,y:22,shape:a,rotation:0}])},updateWall(a,i){r(s=>s.map(o=>o.id===a?{...o,...i}:o))},remove(a){r(i=>i.filter(s=>s.id!==a))},clear(){t([])}}}const Ge=Po();function jr(e){switch(e){case"L-4x8":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:8-.5},{x:4,y:8-.5},{x:4,y:8},{x:0,y:8}];case"L-4x8-mirror":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:8},{x:-4+.5,y:8},{x:-4+.5,y:8-.5},{x:0,y:8-.5}];case"C-4-8-4":return[{x:0,y:0},{x:4,y:0},{x:4,y:.5},{x:.5,y:.5},{x:.5,y:8-.5},{x:4,y:8-.5},{x:4,y:8},{x:0,y:8}];case"L-5x6":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:6-.5},{x:5,y:6-.5},{x:5,y:6},{x:0,y:6}];case"L-5x6-mirror":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:6},{x:-5+.5,y:6},{x:-5+.5,y:6-.5},{x:0,y:6-.5}];case"L-4x6":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:6-.5},{x:4,y:6-.5},{x:4,y:6},{x:0,y:6}];case"L-4x6-mirror":return[{x:0,y:0},{x:.5,y:0},{x:.5,y:6},{x:-4+.5,y:6},{x:-4+.5,y:6-.5},{x:0,y:6-.5}];default:return[]}}function mi(e,t,r,a){const i=a*Math.PI/180,s=Math.cos(i),o=Math.sin(i);return e.map(u=>({x:t+u.x*s-u.y*o,y:r+u.x*o+u.y*s}))}wn(Ge,e=>e.map(t=>mi(jr(t.shape),t.x,t.y,t.rotation)));const dt=it(null),ft=it(null),ea=it([]);function Co(e,t=[]){const r=fr(at),a=fr(Ge),i=Ut();i[e]={terrains:r,walls:a,models:t,savedAt:Date.now()},yr(i)}function Ao(e){const t=Ut();return t[e]?(at.set(t[e].terrains||[]),Ge.set(t[e].walls||[]),{terrains:t[e].terrains||[],walls:t[e].walls||[],models:t[e].models||[]}):null}function Io(e){const t=Ut();delete t[e],yr(t)}function Ro(){const e=Ut();return Object.keys(e).map(t=>({name:t,savedAt:e[t].savedAt,terrainCount:(e[t].terrains||[]).length,wallCount:(e[t].walls||[]).length,modelCount:(e[t].models||[]).length})).sort((t,r)=>r.savedAt-t.savedAt)}function Bn(){ea.set(Ro())}var No=Se('<button class="svelte-10mgcx0"> </button>'),Oo=Se('<button class="svelte-10mgcx0"> </button>'),$o=Se('<div class="field svelte-10mgcx0"><span class="label-text svelte-10mgcx0">Size</span> <span class="value svelte-10mgcx0"> </span></div> <div class="field svelte-10mgcx0"><span class="label-text svelte-10mgcx0">Rotation</span> <span class="value svelte-10mgcx0"> </span></div>',1),jo=Se('<div class="field svelte-10mgcx0"><span class="label-text svelte-10mgcx0">Shape</span> <span class="value svelte-10mgcx0"> </span></div> <div class="field svelte-10mgcx0"><span class="label-text svelte-10mgcx0">Rotation</span> <span class="value svelte-10mgcx0"> </span></div>',1),Wo=Se('<div class="edit-form svelte-10mgcx0"><div class="field svelte-10mgcx0"><label for="edit-x" class="svelte-10mgcx0">X (inches)</label> <input id="edit-x" type="number" step="0.1" class="svelte-10mgcx0"/></div> <div class="field svelte-10mgcx0"><label for="edit-y" class="svelte-10mgcx0">Y (inches)</label> <input id="edit-y" type="number" step="0.1" class="svelte-10mgcx0"/></div> <!> <button class="danger svelte-10mgcx0">Remove</button></div>'),Yo=Se('<p class="hint svelte-10mgcx0">Click a piece to select it</p>'),Bo=Se("<!> <!>",1),Fo=Se('<div class="modal-overlay svelte-10mgcx0" role="presentation"><div class="modal svelte-10mgcx0" role="dialog"><h2 class="svelte-10mgcx0">Save Layout</h2> <div class="modal-field svelte-10mgcx0"><label for="layout-name" class="svelte-10mgcx0">Layout Name</label> <input id="layout-name" type="text" placeholder="Enter a name..." class="svelte-10mgcx0"/></div> <div class="modal-actions svelte-10mgcx0"><button class="secondary svelte-10mgcx0">Cancel</button> <button class="svelte-10mgcx0">Save</button></div></div></div>'),Xo=Se('<p class="hint svelte-10mgcx0">No saved layouts yet</p>'),Ho=Se('<div class="layout-item svelte-10mgcx0" role="button" tabindex="0"><div class="layout-info svelte-10mgcx0"><span class="layout-name svelte-10mgcx0"> </span> <span class="layout-meta svelte-10mgcx0"> </span></div> <button class="delete-btn svelte-10mgcx0" title="Delete">Ã</button></div>'),Uo=Se('<div class="layout-list svelte-10mgcx0"></div>'),Ko=Se('<div class="modal-overlay svelte-10mgcx0" role="presentation"><div class="modal svelte-10mgcx0" role="dialog"><h2 class="svelte-10mgcx0">Load Layout</h2> <!> <div class="modal-actions svelte-10mgcx0"><button class="secondary svelte-10mgcx0">Cancel</button></div></div></div>'),Vo=Se('<main class="svelte-10mgcx0"><div class="header svelte-10mgcx0"><h1 class="svelte-10mgcx0">Layout Builder</h1> <nav class="nav-links svelte-10mgcx0"><a href="#/setup" class="svelte-10mgcx0">Battlefield Setup</a> <a href="#/deployment" class="svelte-10mgcx0">Deployment</a> <a href="#/" class="active svelte-10mgcx0">Layout Builder</a> <a href="#/debug" class="svelte-10mgcx0">Debug Mode</a></nav></div> <div class="layout svelte-10mgcx0"><div class="sidebar svelte-10mgcx0"><section class="svelte-10mgcx0"><h3 class="svelte-10mgcx0">Add Terrain</h3> <div class="button-group svelte-10mgcx0"></div></section> <section class="svelte-10mgcx0"><h3 class="svelte-10mgcx0">Add Wall</h3> <div class="button-group svelte-10mgcx0"></div></section> <section class="svelte-10mgcx0"><h3 class="svelte-10mgcx0"> </h3> <!></section> <section class="svelte-10mgcx0"><h3 class="svelte-10mgcx0">Layout</h3> <div class="button-group vertical svelte-10mgcx0"><button class="svelte-10mgcx0">Save Layout</button> <button class="svelte-10mgcx0">Load Layout</button> <div class="button-row svelte-10mgcx0"><button class="secondary small svelte-10mgcx0">Export</button> <button class="secondary small svelte-10mgcx0">Import</button></div> <button class="secondary svelte-10mgcx0">Clear All</button></div></section> <input type="file" accept=".json" style="display: none;"/></div> <div class="battlefield-area svelte-10mgcx0"><div class="battlefield-container svelte-10mgcx0" role="presentation"><!></div> <div class="info svelte-10mgcx0"><p class="svelte-10mgcx0"> </p> <p class="hint svelte-10mgcx0">Scroll to zoom | Space+drag or middle-click to pan | Double-click to reset view</p></div></div></div></main> <!> <!>',1);function Zo(e,t){gt(t,!1);const r=()=>Oe(dt,"$selectedTerrainId",u),a=()=>Oe(ft,"$selectedWallId",u),i=()=>Oe(at,"$layoutTerrains",u),s=()=>Oe(Ge,"$layoutWalls",u),o=()=>Oe(ea,"$savedLayoutsList",u),[u,l]=br(),d=P(),c=P();let p=P(!1),g=P(!1),h=P(""),L=null;Gn(()=>{Bn(),window.addEventListener("keydown",E)}),vi(()=>{window.removeEventListener("keydown",E)});function E(S){if(S.target.tagName==="INPUT"||n(p)||n(g))return;const M=r()||a();if((S.key==="Delete"||S.key==="Backspace")&&M){S.preventDefault(),_e();return}if(M&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(S.key)){S.preventDefault();const $=S.shiftKey?.1:1;let J=0,B=0;switch(S.key){case"ArrowUp":B=-$;break;case"ArrowDown":B=$;break;case"ArrowLeft":J=-$;break;case"ArrowRight":J=$;break}if(r()){const W=i().find(re=>re.id===r());W&&at.updateTerrain(r(),{x:W.x+J,y:W.y+B})}else if(a()){const W=s().find(re=>re.id===a());W&&Ge.updateWall(a(),{x:W.x+J,y:W.y+B})}return}if(S.key==="c"&&(S.ctrlKey||S.metaKey)&&M){if(S.preventDefault(),r()){const $=i().find(J=>J.id===r());$&&(L={type:"terrain",data:{...$}})}else if(a()){const $=s().find(J=>J.id===a());$&&(L={type:"wall",data:{...$}})}return}if(S.key==="v"&&(S.ctrlKey||S.metaKey)&&L){if(S.preventDefault(),L.type==="terrain"){const $="terrain-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),J={...L.data,id:$,x:L.data.x+2,y:L.data.y+2};at.update(B=>[...B,J]),dt.set($),ft.set(null),L.data.x+=2,L.data.y+=2}else if(L.type==="wall"){const $="wall-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),J={...L.data,id:$,x:L.data.x+2,y:L.data.y+2};Ge.update(B=>[...B,J]),ft.set($),dt.set(null),L.data.x+=2,L.data.y+=2}return}if(S.key==="Escape"){Pe();return}}let m=P(""),A=P("");function R(S,M){at.add(S,M)}function U(S){Ge.add(S)}function q(S){dt.set(S),ft.set(null)}function te(S){ft.set(S),dt.set(null)}function Pe(){dt.set(null),ft.set(null)}function be(S,M,$){at.updateTerrain(S,{x:M,y:$})}function de(S,M,$){Ge.updateWall(S,{x:M,y:$})}function Ce(S,M){at.updateTerrain(S,{rotation:M})}function Me(S,M){Ge.updateWall(S,{rotation:M})}function _e(){r()?(at.remove(r()),dt.set(null)):a()&&(Ge.remove(a()),ft.set(null))}function le(){const S=parseFloat(n(m)),M=parseFloat(n(A));!isNaN(S)&&!isNaN(M)&&(r()?at.updateTerrain(r(),{x:S,y:M}):a()&&Ge.updateWall(a(),{x:S,y:M}))}function je(){_(h,""),_(p,!0)}function he(){n(h).trim()&&(Co(n(h).trim()),Bn(),_(p,!1),_(h,""))}function me(){Bn(),_(g,!0)}function $e(S){Ao(S),dt.set(null),ft.set(null),_(g,!1)}function ce(S,M){M.stopPropagation(),confirm(`Delete layout "${S}"?`)&&(Io(S),Bn())}function z(){confirm("Clear all terrain and walls?")&&(at.clear(),Ge.clear(),dt.set(null),ft.set(null))}function fe(S){return new Date(S).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ue(S){const M=$r.find($=>$.shape===S);return M?M.label:S}function ae(){const S=i(),M=s(),$={version:1,exportedAt:Date.now(),terrains:S,walls:M},J=JSON.stringify($,null,2),B=new Blob([J],{type:"application/json"}),W=URL.createObjectURL(B),re=document.createElement("a");re.href=W,re.download=`layout-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(W)}let Ee=P();function et(){n(Ee).click()}function tt(S){const M=S.target.files[0];if(!M)return;const $=new FileReader;$.onload=J=>{try{const B=JSON.parse(J.target.result);B.terrains&&Array.isArray(B.terrains)&&at.set(B.terrains),B.walls&&Array.isArray(B.walls)&&Ge.set(B.walls),dt.set(null),ft.set(null)}catch(B){alert("Failed to import layout: Invalid file format"),console.error("Import error:",B)}},$.readAsText(M),S.target.value=""}H(()=>(i(),r()),()=>{_(d,i().find(S=>S.id===r()))}),H(()=>(s(),a()),()=>{_(c,s().find(S=>S.id===a()))}),H(()=>(n(d),n(c)),()=>{n(d)?(_(m,n(d).x.toFixed(1)),_(A,n(d).y.toFixed(1))):n(c)&&(_(m,n(c).x.toFixed(1)),_(A,n(c).y.toFixed(1)))}),Yt(),Lt();var w=Vo(),b=Ne(w),j=y(x(b),2),k=x(j),T=x(k),Q=y(x(T),2);ve(Q,5,()=>pi,Re,(S,M)=>{var $=No(),J=x($);Y(()=>xe(J,(n(M),v(()=>n(M).label)))),X("click",$,()=>R(n(M).width,n(M).height)),D(S,$)});var I=y(T,2),Ae=y(x(I),2);ve(Ae,5,()=>$r,Re,(S,M)=>{var $=Oo(),J=x($);Y(()=>xe(J,(n(M),v(()=>n(M).label)))),X("click",$,()=>U(n(M).shape)),D(S,$)});var se=y(I,2),ge=x(se),oe=x(ge),Te=y(ge,2);{var ke=S=>{var M=Wo(),$=x(M),J=y(x($),2),B=y($,2),W=y(x(B),2),re=y(B,2);{var ee=Xe=>{var F=$o(),C=Ne(F),Be=y(x(C),2),rt=x(Be),Ue=y(C,2),He=y(x(Ue),2),ut=x(He);Y(cn=>{xe(rt,`${n(d),v(()=>n(d).width)??""}" x ${n(d),v(()=>n(d).height)??""}"`),xe(ut,`${cn??""}Â°`)},[()=>(n(d),v(()=>Math.round(n(d).rotation)))]),D(Xe,F)},Le=Xe=>{var F=an(),C=Ne(F);{var Be=rt=>{var Ue=jo(),He=Ne(Ue),ut=y(x(He),2),cn=x(ut),un=y(He,2),jn=y(x(un),2),dn=x(jn);Y((Ei,ki)=>{xe(cn,Ei),xe(dn,`${ki??""}Â°`)},[()=>(n(c),v(()=>ue(n(c).shape))),()=>(n(c),v(()=>Math.round(n(c).rotation)))]),D(rt,Ue)};ye(C,rt=>{n(c)&&rt(Be)},!0)}D(Xe,F)};ye(re,Xe=>{n(d)?Xe(ee):Xe(Le,!1)})}var nt=y(re,2);Sr(J,()=>n(m),Xe=>_(m,Xe)),X("change",J,le),Sr(W,()=>n(A),Xe=>_(A,Xe)),X("change",W,le),X("click",nt,_e),D(S,M)},Ze=S=>{var M=Yo();D(S,M)};ye(Te,S=>{n(d)||n(c)?S(ke):S(Ze,!1)})}var pt=y(se,2),Bt=y(x(pt),2),_t=x(Bt),lt=y(_t,2),N=y(lt,2),we=x(N),Ye=y(we,2),St=y(N,2),ct=y(pt,2);fi(ct,S=>_(Ee,S),()=>n(Ee));var Mt=y(k,2),Et=x(Mt),on=x(Et);Lr(on,{children:Ur,$$slots:{default:(S,M)=>{const $=Ke(()=>M.screenToSvg);var J=Bo(),B=Ne(J);ve(B,1,i,re=>re.id,(re,ee)=>{{let Le=Ke(()=>(n(ee),r(),v(()=>n(ee).id===r())));gi(re,{get id(){return n(ee),v(()=>n(ee).id)},get x(){return n(ee),v(()=>n(ee).x)},get y(){return n(ee),v(()=>n(ee).y)},get width(){return n(ee),v(()=>n(ee).width)},get height(){return n(ee),v(()=>n(ee).height)},get rotation(){return n(ee),v(()=>n(ee).rotation)},get selected(){return n(Le)},get screenToSvg(){return n($)},onSelect:q,onDrag:be,onRotate:Ce})}});var W=y(B,2);ve(W,1,s,re=>re.id,(re,ee)=>{{let Le=Ke(()=>(n(ee),a(),v(()=>n(ee).id===a())));Qr(re,{get id(){return n(ee),v(()=>n(ee).id)},get x(){return n(ee),v(()=>n(ee).x)},get y(){return n(ee),v(()=>n(ee).y)},get shape(){return n(ee),v(()=>n(ee).shape)},get rotation(){return n(ee),v(()=>n(ee).rotation)},get selected(){return n(Le)},get screenToSvg(){return n($)},onSelect:te,onDrag:de,onRotate:Me})}}),D(S,J)}}});var Ft=y(Et,2),K=x(Ft),G=x(K),ie=y(b,2);{var Fe=S=>{var M=Fo(),$=x(M),J=y(x($),2),B=y(x(J),2),W=y(J,2),re=x(W),ee=y(re,2);Y(Le=>ee.disabled=Le,[()=>(n(h),v(()=>!n(h).trim()))]),Sr(B,()=>n(h),Le=>_(h,Le)),X("keydown",B,Le=>Le.key==="Enter"&&he()),X("click",re,()=>_(p,!1)),X("click",ee,he),X("click",$,va(function(Le){ya.call(this,t,Le)})),X("click",M,()=>_(p,!1)),D(S,M)};ye(ie,S=>{n(p)&&S(Fe)})}var ze=y(ie,2);{var ln=S=>{var M=Ko(),$=x(M),J=y(x($),2);{var B=Le=>{var nt=Xo();D(Le,nt)},W=Le=>{var nt=Uo();ve(nt,5,o,Re,(Xe,F)=>{var C=Ho(),Be=x(C),rt=x(Be),Ue=x(rt),He=y(rt,2),ut=x(He),cn=y(Be,2);Y(un=>{xe(Ue,(n(F),v(()=>n(F).name))),xe(ut,`${n(F),v(()=>n(F).terrainCount)??""} terrain${n(F),v(()=>n(F).terrainCount!==1?"s":"")??""}, ${n(F),v(()=>n(F).wallCount||0)??""} wall${n(F),v(()=>(n(F).wallCount||0)!==1?"s":"")??""} Â· ${un??""}`)},[()=>(n(F),v(()=>fe(n(F).savedAt)))]),X("click",cn,un=>ce(n(F).name,un)),X("click",C,()=>$e(n(F).name)),D(Xe,C)}),D(Le,nt)};ye(J,Le=>{o(),v(()=>o().length===0)?Le(B):Le(W,!1)})}var re=y(J,2),ee=x(re);X("click",ee,()=>_(g,!1)),X("click",$,va(function(Le){ya.call(this,t,Le)})),X("click",M,()=>_(g,!1)),D(S,M)};ye(ze,S=>{n(g)&&S(ln)})}Y(()=>{xe(oe,`Selected ${n(d)?"Terrain":n(c)?"Wall":"Item"}`),lt.disabled=(o(),v(()=>o().length===0)),xe(G,`Battlefield: 60" x 44" | ${i(),v(()=>i().length)??""} terrain${i(),v(()=>i().length!==1?"s":"")??""} | ${s(),v(()=>s().length)??""} wall${s(),v(()=>s().length!==1?"s":"")??""}`)}),X("click",_t,je),X("click",lt,me),X("click",we,ae),X("click",Ye,et),X("click",St,z),X("change",ct,tt),X("click",Et,Pe),D(e,w),xt(),l()}const wi=1/25.4,bi=40*wi/2,Li=3+20*wi;function Si(e="item"){return e+"-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function zo(){const{subscribe:e,set:t,update:r}=it([]);return{subscribe:e,set:t,update:r,add(a){const i=Si("zone");return r(s=>[...s,{id:i,...a}]),i},updateZone(a,i){r(s=>s.map(o=>o.id===a?{...o,...i}:o))},remove(a){r(i=>i.filter(s=>s.id!==a))},clear(){t([])}}}function qo(){const{subscribe:e,set:t,update:r}=it([]);return{subscribe:e,set:t,update:r,add(a,i,s=!1){const o=Si("obj"),u=Math.round(a),l=Math.round(i);return r(d=>[...d,{id:o,x:u,y:l,isPrimary:s}]),o},updateObjective(a,i){r(s=>s.map(o=>o.id===a?{...o,...i}:o))},remove(a){r(i=>i.filter(s=>s.id!==a))},clear(){t([])}}}zo();qo();const Go=[{name:"Dawn of War",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:32},{type:"L",x:60,y:32},{type:"L",x:60,y:44},{type:"L",x:0,y:44},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:0,y:0},{type:"L",x:60,y:0},{type:"L",x:60,y:12},{type:"L",x:0,y:12},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:10,y:22,isPrimary:!1},{x:50,y:22,isPrimary:!1},{x:30,y:6,isPrimary:!1},{x:30,y:38,isPrimary:!1}]},{name:"Hammer and Anvil",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:0},{type:"L",x:18,y:0},{type:"L",x:18,y:44},{type:"L",x:0,y:44},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:42,y:0},{type:"L",x:60,y:0},{type:"L",x:60,y:44},{type:"L",x:42,y:44},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:30,y:6,isPrimary:!1},{x:30,y:38,isPrimary:!1},{x:10,y:22,isPrimary:!1},{x:50,y:22,isPrimary:!1}]},{name:"Tipping Point",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:0},{type:"L",x:12,y:0},{type:"L",x:12,y:22},{type:"L",x:20,y:22},{type:"L",x:20,y:44},{type:"L",x:0,y:44},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:40,y:0},{type:"L",x:60,y:0},{type:"L",x:60,y:44},{type:"L",x:48,y:44},{type:"L",x:48,y:22},{type:"L",x:40,y:22},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:14,y:34,isPrimary:!1},{x:22,y:8,isPrimary:!1},{x:38,y:36,isPrimary:!1},{x:46,y:10,isPrimary:!1}]},{name:"Search and Destroy",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:22},{type:"L",x:21,y:22},{type:"A",rx:9,ry:9,rotation:0,largeArc:0,sweep:0,x:30,y:31},{type:"L",x:30,y:44},{type:"L",x:0,y:44},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:30,y:0},{type:"L",x:30,y:13},{type:"A",rx:9,ry:9,rotation:0,largeArc:0,sweep:1,x:39,y:22},{type:"L",x:60,y:22},{type:"L",x:60,y:0},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:14,y:10,isPrimary:!1},{x:46,y:34,isPrimary:!1},{x:14,y:34,isPrimary:!1},{x:46,y:10,isPrimary:!1}]},{name:"Sweeping Engagement",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:0},{type:"L",x:0,y:8},{type:"L",x:30,y:8},{type:"L",x:30,y:14},{type:"L",x:60,y:14},{type:"L",x:60,y:0},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:0,y:44},{type:"L",x:60,y:44},{type:"L",x:60,y:36},{type:"L",x:30,y:36},{type:"L",x:30,y:30},{type:"L",x:0,y:30},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:10,y:18,isPrimary:!1},{x:50,y:26,isPrimary:!1},{x:18,y:38,isPrimary:!1},{x:42,y:6,isPrimary:!1}]},{name:"Crucible of Battle",zones:[{name:"Player 1",color:"rgba(59, 130, 246, 0.1)",borderColor:"#3b82f6",path:[{type:"M",x:0,y:0},{type:"L",x:30,y:44},{type:"L",x:0,y:44},{type:"Z"}]},{name:"Player 2",color:"rgba(239, 68, 68, 0.1)",borderColor:"#ef4444",path:[{type:"M",x:60,y:44},{type:"L",x:30,y:0},{type:"L",x:60,y:0},{type:"Z"}]}],objectives:[{x:30,y:22,isPrimary:!0},{x:20,y:8,isPrimary:!1},{x:40,y:36,isPrimary:!1},{x:14,y:34,isPrimary:!1},{x:46,y:10,isPrimary:!1}]}];function Wr(e){return e.map(t=>{switch(t.type){case"M":return`M ${t.x} ${t.y}`;case"L":return`L ${t.x} ${t.y}`;case"A":return`A ${t.rx} ${t.ry} ${t.rotation} ${t.largeArc} ${t.sweep} ${t.x} ${t.y}`;case"Z":return"Z";default:return""}}).join(" ")}const rr=it(null),Fn=it(null),ar=it(null),Mi=wn([Fn,ar],([e,t])=>{if(!e)return{terrains:[],walls:[]};if(t==="preset"){const r=_i.find(a=>a.name===e);return r?{terrains:r.terrains||[],walls:r.walls||[]}:{terrains:[],walls:[]}}else if(t==="saved"){const r=localStorage.getItem("warhammer-deployment-layouts");if(r)try{const a=JSON.parse(r);if(a[e])return{terrains:a[e].terrains||[],walls:a[e].walls||[]}}catch(a){console.error("Failed to load layout:",a)}}return{terrains:[],walls:[]}});var Jo=Se('<div class="selected-item svelte-1jotvmi"><span class="selected-name svelte-1jotvmi"> </span> <button class="small secondary svelte-1jotvmi">Change</button></div>'),Qo=Se('<button class="svelte-1jotvmi"> </button>'),el=Se('<div class="button-group svelte-1jotvmi"></div>'),tl=Se('<div class="selected-item svelte-1jotvmi"><span class="selected-name svelte-1jotvmi"> </span> <button class="small secondary svelte-1jotvmi">Change</button></div>'),nl=Se('<button class="svelte-1jotvmi"> </button>'),rl=Se('<button class="svelte-1jotvmi"> </button>'),al=Se('<div class="layout-group svelte-1jotvmi"><h4 class="svelte-1jotvmi">Saved</h4> <div class="button-group svelte-1jotvmi"></div></div>'),il=Se('<div class="layout-sections svelte-1jotvmi"><div class="layout-group svelte-1jotvmi"><h4 class="svelte-1jotvmi">Presets</h4> <div class="button-group svelte-1jotvmi"></div></div> <!></div>'),sl=Se('<div class="summary-row svelte-1jotvmi"><span class="label svelte-1jotvmi">Objectives:</span> <span class="value svelte-1jotvmi"> </span></div>'),ol=Se('<div class="summary-row svelte-1jotvmi"><span class="label svelte-1jotvmi">Pieces:</span> <span class="value svelte-1jotvmi"> </span></div>'),ll=ne('<path stroke-width="0.10" stroke-dasharray="0.5,0.25"></path>'),cl=ne('<circle stroke-width="0.05" stroke-dasharray="0.3,0.15"></circle><circle stroke="#000" stroke-width="0.06"></circle><circle r="0.15" fill="#000"></circle>',1),ul=ne("<!><!>",1),dl=ne('<g><rect fill="rgba(139, 90, 43, 0.6)" stroke="#8b5a2b" stroke-width="0.1"></rect></g>'),fl=ne('<g><path fill="rgba(139, 69, 19, 0.8)" stroke="#5c3317" stroke-width="0.1"></path></g>'),vl=ne("<!><!><!>",1),hl=Se('<main class="svelte-1jotvmi"><div class="header svelte-1jotvmi"><h1 class="svelte-1jotvmi">Battlefield Setup</h1> <nav class="nav-links svelte-1jotvmi"><a href="#/setup" class="active svelte-1jotvmi">Battlefield Setup</a> <a href="#/deployment" class="svelte-1jotvmi">Deployment</a> <a href="#/" class="svelte-1jotvmi">Layout Builder</a> <a href="#/debug" class="svelte-1jotvmi">Debug Mode</a></nav></div> <div class="layout svelte-1jotvmi"><div class="sidebar svelte-1jotvmi"><section class="svelte-1jotvmi"><h3 class="svelte-1jotvmi">Deployment</h3> <!></section> <section class="svelte-1jotvmi"><h3 class="svelte-1jotvmi">Terrain Layout</h3> <!></section> <section class="svelte-1jotvmi"><h3 class="svelte-1jotvmi">Summary</h3> <div class="summary svelte-1jotvmi"><div class="summary-row svelte-1jotvmi"><span class="label svelte-1jotvmi">Deployment:</span> <span class="value svelte-1jotvmi"> </span></div> <div class="summary-row svelte-1jotvmi"><span class="label svelte-1jotvmi">Terrain:</span> <span class="value svelte-1jotvmi"> </span></div> <!> <!></div></section></div> <div class="battlefield-area svelte-1jotvmi"><div class="battlefield-container svelte-1jotvmi"><!></div> <div class="info svelte-1jotvmi"><p class="svelte-1jotvmi">Battlefield: 60" x 44"</p> <p class="hint svelte-1jotvmi">Scroll to zoom | Space+drag to pan | Double-click to reset view</p></div></div></div></main>');function yl(e,t){gt(t,!1);const r=()=>Oe(rr,"$selectedDeployment",o),a=()=>Oe(Fn,"$selectedLayoutName",o),i=()=>Oe(ea,"$savedLayoutsList",o),s=()=>Oe(Mi,"$loadedTerrain",o),[o,u]=br();Gn(()=>{Bn()});function l(w){rr.set(w)}function d(w){Fn.set(w.name),ar.set("preset")}function c(w){Fn.set(w),ar.set("saved")}function p(){Fn.set(null),ar.set(null)}function g(){rr.set(null)}function h(w){let j=[];switch(w.shape){case"L-4x8":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:8-.5},{x:4,y:8-.5},{x:4,y:8},{x:0,y:8}];break;case"L-4x8-mirror":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:8},{x:-4+.5,y:8},{x:-4+.5,y:8-.5},{x:0,y:8-.5}];break;case"C-4-8-4":j=[{x:0,y:0},{x:4,y:0},{x:4,y:.5},{x:.5,y:.5},{x:.5,y:8-.5},{x:4,y:8-.5},{x:4,y:8},{x:0,y:8}];break;case"L-5x6":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:6-.5},{x:5,y:6-.5},{x:5,y:6},{x:0,y:6}];break;case"L-5x6-mirror":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:6},{x:-5+.5,y:6},{x:-5+.5,y:6-.5},{x:0,y:6-.5}];break;case"L-4x6":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:6-.5},{x:4,y:6-.5},{x:4,y:6},{x:0,y:6}];break;case"L-4x6-mirror":j=[{x:0,y:0},{x:.5,y:0},{x:.5,y:6},{x:-4+.5,y:6},{x:-4+.5,y:6-.5},{x:0,y:6-.5}];break;default:return""}return`M ${j.map(k=>`${w.x+k.x},${w.y+k.y}`).join(" L ")} Z`}function L(w){switch(w.shape){case"L-4x8":return{x:w.x+2,y:w.y+4};case"L-4x8-mirror":return{x:w.x-2+.5,y:w.y+4};case"C-4-8-4":return{x:w.x+2,y:w.y+4};case"L-5x6":return{x:w.x+2.5,y:w.y+3};case"L-5x6-mirror":return{x:w.x-2.5+.5,y:w.y+3};case"L-4x6":return{x:w.x+2,y:w.y+3};case"L-4x6-mirror":return{x:w.x-2+.5,y:w.y+3};default:return{x:w.x,y:w.y}}}Lt();var E=hl(),m=y(x(E),2),A=x(m),R=x(A),U=y(x(R),2);{var q=w=>{var b=Jo(),j=x(b),k=x(j),T=y(j,2);Y(()=>xe(k,r().name)),X("click",T,g),D(w,b)},te=w=>{var b=el();ve(b,5,()=>Go,Re,(j,k)=>{var T=Qo(),Q=x(T);Y(()=>xe(Q,n(k).name)),X("click",T,()=>l(n(k))),D(j,T)}),D(w,b)};ye(U,w=>{r()?w(q):w(te,!1)})}var Pe=y(R,2),be=y(x(Pe),2);{var de=w=>{var b=tl(),j=x(b),k=x(j),T=y(j,2);Y(()=>xe(k,a())),X("click",T,p),D(w,b)},Ce=w=>{var b=il(),j=x(b),k=y(x(j),2);ve(k,5,()=>_i,Re,(I,Ae)=>{var se=nl(),ge=x(se);Y(()=>xe(ge,n(Ae).name)),X("click",se,()=>d(n(Ae))),D(I,se)});var T=y(j,2);{var Q=I=>{var Ae=al(),se=y(x(Ae),2);ve(se,5,i,Re,(ge,oe)=>{var Te=rl(),ke=x(Te);Y(()=>xe(ke,n(oe).name)),X("click",Te,()=>c(n(oe).name)),D(ge,Te)}),D(I,Ae)};ye(T,I=>{i().length>0&&I(Q)})}D(w,b)};ye(be,w=>{a()?w(de):w(Ce,!1)})}var Me=y(Pe,2),_e=y(x(Me),2),le=x(_e),je=y(x(le),2),he=x(je),me=y(le,2),$e=y(x(me),2),ce=x($e),z=y(me,2);{var fe=w=>{var b=sl(),j=y(x(b),2),k=x(j);Y(()=>xe(k,r().objectives.length)),D(w,b)};ye(z,w=>{r()&&w(fe)})}var ue=y(z,2);{var ae=w=>{var b=ol(),j=y(x(b),2),k=x(j);Y(()=>xe(k,`${s().terrains.length??""} terrain, ${s().walls.length??""} walls`)),D(w,b)};ye(ue,w=>{(s().terrains.length>0||s().walls.length>0)&&w(ae)})}var Ee=y(A,2),et=x(Ee),tt=x(et);Lr(tt,{children:(w,b)=>{var j=vl(),k=Ne(j);{var T=Ae=>{var se=ul(),ge=Ne(se);ve(ge,1,()=>r().zones,Re,(Te,ke)=>{var Ze=ll();Y(pt=>{f(Ze,"d",pt),f(Ze,"fill",n(ke).color),f(Ze,"stroke",n(ke).borderColor)},[()=>Wr(n(ke).path)]),D(Te,Ze)});var oe=y(ge);ve(oe,1,()=>r().objectives,Re,(Te,ke)=>{const Ze=Ke(()=>n(ke).isPrimary?"#fbbf24":"#9ca3af"),pt=Ke(()=>n(ke).isPrimary?"rgba(251, 191, 36, 0.15)":"rgba(156, 163, 175, 0.15)");var Bt=cl(),_t=Ne(Bt),lt=y(_t),N=y(lt);Y(()=>{f(_t,"cx",n(ke).x),f(_t,"cy",n(ke).y),f(_t,"r",Li),f(_t,"fill",n(pt)),f(_t,"stroke",n(Ze)),f(lt,"cx",n(ke).x),f(lt,"cy",n(ke).y),f(lt,"r",bi),f(lt,"fill",n(Ze)),f(N,"cx",n(ke).x),f(N,"cy",n(ke).y)}),D(Te,Bt)}),D(Ae,se)};ye(k,Ae=>{r()&&Ae(T)})}var Q=y(k);ve(Q,1,()=>s().terrains,Re,(Ae,se)=>{const ge=Ke(()=>n(se).x+n(se).width/2),oe=Ke(()=>n(se).y+n(se).height/2);var Te=dl(),ke=x(Te);Y(()=>{f(Te,"transform",`rotate(${n(se).rotation??""}, ${n(ge)??""}, ${n(oe)??""})`),f(ke,"x",n(se).x),f(ke,"y",n(se).y),f(ke,"width",n(se).width),f(ke,"height",n(se).height)}),D(Ae,Te)});var I=y(Q);ve(I,1,()=>s().walls,Re,(Ae,se)=>{const ge=Ke(()=>L(n(se)));var oe=fl(),Te=x(oe);Y(ke=>{f(oe,"transform",`rotate(${n(se).rotation??""}, ${n(ge).x??""}, ${n(ge).y??""})`),f(Te,"d",ke)},[()=>h(n(se))]),D(Ae,oe)}),D(w,j)},$$slots:{default:!0}}),Y(()=>{xe(he,r()?.name||"None"),xe(ce,a()||"None")}),D(e,E),xt(),u()}const mt=1/25.4,Nt={circles:[{type:"25mm",radius:25*mt/2,label:"25mm"},{type:"28mm",radius:28*mt/2,label:"28mm"},{type:"32mm",radius:32*mt/2,label:"32mm"},{type:"40mm",radius:40*mt/2,label:"40mm"},{type:"50mm",radius:50*mt/2,label:"50mm"},{type:"60mm",radius:60*mt/2,label:"60mm"},{type:"80mm",radius:80*mt/2,label:"80mm"}],ovals:[{type:"90x25mm",width:90*mt,height:25*mt,label:"90Ã25mm"},{type:"105x70mm",width:105*mt,height:70*mt,label:"105Ã70mm"},{type:"120x90mm",width:120*mt,height:90*mt,label:"120Ã90mm"}]};function ir(e){const t=Nt.circles.find(a=>a.type===e);return t||Nt.ovals.find(a=>a.type===e)}function sr(e){return Nt.ovals.some(t=>t.type===e)}function gl(){return"model-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function xl(){const{subscribe:e,set:t,update:r}=it([]);return{subscribe:e,set:t,update:r,add(a,i,s,o){const u=gl(),l={id:u,baseType:a,playerId:i,x:s,y:o,rotation:0};return r(d=>[...d,l]),u},updateModel(a,i){r(s=>s.map(o=>o.id===a?{...o,...i}:o))},remove(a){r(i=>i.filter(s=>s.id!==a))},removeByPlayer(a){r(i=>i.filter(s=>s.playerId!==a))},clear(){t([])}}}const vt=xl(),pl=wn(vt,e=>e.filter(t=>t.playerId===1)),_l=wn(vt,e=>e.filter(t=>t.playerId===2)),At=it(null);wn([vt,At],([e,t])=>t?e.find(r=>r.id===t):null);var ml=ne('<ellipse role="button" tabindex="0" class="svelte-hycs6b"></ellipse>'),wl=ne('<circle role="button" tabindex="0" class="svelte-hycs6b"></circle>'),bl=ne('<line stroke-width="0.08" stroke-dasharray="0.2,0.1"></line><circle r="0.6" stroke-width="0.08" role="button" tabindex="0" class="rotate-handle svelte-hycs6b"></circle>',1),Ll=ne("<g><!><!></g>");function gr(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P(),u=P(),l=P(),d=P(),c=P(),p=P(),g=P();let h=Z(t,"id",8),L=Z(t,"x",8),E=Z(t,"y",8),m=Z(t,"baseType",8),A=Z(t,"playerId",8),R=Z(t,"rotation",8,0),U=Z(t,"selected",8,!1),q=Z(t,"screenToSvg",8),te=Z(t,"onSelect",8,()=>{}),Pe=Z(t,"onDrag",8,()=>{}),be=Z(t,"onRotate",8,()=>{}),de=P(!1),Ce=!1,Me={x:0,y:0};function _e(w){w.stopPropagation(),te()(h())}function le(w){if(w.button!==0)return;w.preventDefault(),w.stopPropagation(),te()(h()),_(de,!0);const b=q()(w.clientX,w.clientY);Me={x:b.x-L(),y:b.y-E()},window.addEventListener("mousemove",je),window.addEventListener("mouseup",he)}function je(w){if(!n(de))return;const b=q()(w.clientX,w.clientY);let j=b.x-Me.x,k=b.y-Me.y;const T=n(a)?Math.max(n(l),n(d)):n(u);j=Math.max(T,Math.min(V.width-T,j)),k=Math.max(T,Math.min(V.height-T,k)),Pe()(h(),j,k)}function he(){_(de,!1),window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",he)}function me(w){w.preventDefault(),w.stopPropagation(),Ce=!0,window.addEventListener("mousemove",$e),window.addEventListener("mouseup",ce)}function $e(w){if(!Ce)return;const b=q()(w.clientX,w.clientY),j=b.x-L(),k=b.y-E();let T=Math.atan2(k,j)*180/Math.PI+45;w.shiftKey||(T=Math.round(T/15)*15),be()(h(),T)}function ce(){Ce=!1,window.removeEventListener("mousemove",$e),window.removeEventListener("mouseup",ce)}H(()=>O(m()),()=>{_(r,ir(m()))}),H(()=>O(m()),()=>{_(a,sr(m()))}),H(()=>O(A()),()=>{_(i,A()===1?"#3b82f6":"#ef4444")}),H(()=>O(A()),()=>{_(s,A()===1?"rgba(59, 130, 246, 0.5)":"rgba(239, 68, 68, 0.5)")}),H(()=>O(U()),()=>{_(o,U()?.15:.1)}),H(()=>n(r),()=>{_(u,n(r)?.radius||.5)}),H(()=>n(r),()=>{_(l,n(r)?.width?n(r).width/2:0)}),H(()=>n(r),()=>{_(d,n(r)?.height?n(r).height/2:0)}),H(()=>(n(a),n(l),n(d)),()=>{_(c,n(a)?Math.max(n(l),n(d))+1:0)}),H(()=>(O(L()),n(c),O(R())),()=>{_(p,L()+n(c)*Math.cos((R()-45)*Math.PI/180))}),H(()=>(O(E()),n(c),O(R())),()=>{_(g,E()+n(c)*Math.sin((R()-45)*Math.PI/180))}),Yt(),Lt();var z=Ll();let fe;var ue=x(z);{var ae=w=>{var b=ml();Y(()=>{f(b,"cx",L()),f(b,"cy",E()),f(b,"rx",n(l)),f(b,"ry",n(d)),f(b,"transform",`rotate(${R()??""}, ${L()??""}, ${E()??""})`),f(b,"fill",U()?n(i):n(s)),f(b,"stroke",n(i)),f(b,"stroke-width",n(o))}),X("click",b,_e),X("mousedown",b,le),D(w,b)},Ee=w=>{var b=wl();Y(()=>{f(b,"cx",L()),f(b,"cy",E()),f(b,"r",n(u)),f(b,"fill",U()?n(i):n(s)),f(b,"stroke",n(i)),f(b,"stroke-width",n(o))}),X("click",b,_e),X("mousedown",b,le),D(w,b)};ye(ue,w=>{n(a)?w(ae):w(Ee,!1)})}var et=y(ue);{var tt=w=>{var b=bl(),j=Ne(b),k=y(j);Y(()=>{f(j,"x1",L()),f(j,"y1",E()),f(j,"x2",n(p)),f(j,"y2",n(g)),f(j,"stroke",n(i)),f(k,"cx",n(p)),f(k,"cy",n(g)),f(k,"fill",n(i)),f(k,"stroke",A()===1?"#1d4ed8":"#b91c1c")}),X("mousedown",k,me),D(w,b)};ye(et,w=>{U()&&n(a)&&w(tt)})}Y(()=>fe=Ct(z,0,"model-base svelte-hycs6b",null,fe,{selected:U(),dragging:n(de)})),D(e,z),xt()}var Sl=ne('<ellipse fill="none" stroke-width="2"></ellipse>'),Ml=ne('<circle fill="none" stroke-width="2"></circle>'),El=Se('<button class="palette-item svelte-1urec28"><svg class="svelte-1urec28"><!></svg> <span class="label svelte-1urec28"> </span></button>');function xr(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P(),u=P();let l=Z(t,"baseSize",8),d=Z(t,"playerId",8),c=Z(t,"onDragStart",8,()=>{});const p=3;function g(q){q.button===0&&(q.preventDefault(),c()(l(),q))}H(()=>O(d()),()=>{_(r,d()===1?"#3b82f6":"#ef4444")}),H(()=>O(l()),()=>{_(a,l().width!==void 0)}),H(()=>(n(a),O(l())),()=>{_(i,n(a)?null:l().radius*p)}),H(()=>(n(a),O(l())),()=>{_(s,n(a)?l().width/2*p:null)}),H(()=>(n(a),O(l())),()=>{_(o,n(a)?l().height/2*p:null)}),H(()=>(n(a),O(l())),()=>{_(u,n(a)?Math.max(l().width,l().height)*p:l().radius*2*p)}),Yt(),Lt();var h=El(),L=x(h),E=x(L);{var m=q=>{var te=Sl();Y(()=>{f(te,"cx",(n(u)+8)/2),f(te,"cy",(n(u)+8)/2),f(te,"rx",n(s)),f(te,"ry",n(o)),f(te,"stroke",n(r))}),D(q,te)},A=q=>{var te=Ml();Y(()=>{f(te,"cx",(n(u)+8)/2),f(te,"cy",(n(u)+8)/2),f(te,"r",n(i)),f(te,"stroke",n(r))}),D(q,te)};ye(E,q=>{n(a)?q(m):q(A,!1)})}var R=y(L,2),U=x(R);Y(()=>{Us(h,`border-color: ${n(r)??""}`),f(h,"title",(O(l()),v(()=>l().label))),f(L,"width",n(u)+8),f(L,"height",n(u)+8),f(L,"viewBox",`0 0 ${n(u)+8} ${n(u)+8}`),xe(U,(O(l()),v(()=>l().label)))}),X("mousedown",h,g),D(e,h),xt()}var kl=Se('<div class="field svelte-1g40uyy"><span class="label-text svelte-1g40uyy">Rotation</span> <span class="value svelte-1g40uyy"> </span></div>'),Tl=Se('<div class="field svelte-1g40uyy"><span class="label-text svelte-1g40uyy">LoS Status</span> <span class="value svelte-1g40uyy"> </span></div>'),Dl=Se('<div class="edit-form svelte-1g40uyy"><div class="field svelte-1g40uyy"><span class="label-text svelte-1g40uyy">Base Type</span> <span class="value svelte-1g40uyy"> </span></div> <div class="field svelte-1g40uyy"><span class="label-text svelte-1g40uyy">Player</span> <span class="value svelte-1g40uyy"> </span></div> <div class="field svelte-1g40uyy"><span class="label-text svelte-1g40uyy">Position</span> <span class="value svelte-1g40uyy"> </span></div> <!> <div class="field svelte-1g40uyy"><label class="checkbox-label svelte-1g40uyy"><input type="checkbox" class="svelte-1g40uyy"/> Show Line of Sight</label></div> <!> <button class="danger svelte-1g40uyy">Remove</button></div>'),Pl=Se('<p class="hint svelte-1g40uyy">Click a model to select it</p>'),Cl=ne('<path stroke-width="0.10" stroke-dasharray="0.5,0.25" pointer-events="none"></path>'),Al=ne('<circle stroke-width="0.05" stroke-dasharray="0.3,0.15" pointer-events="none"></circle><circle stroke="#000" stroke-width="0.06" pointer-events="none"></circle><circle r="0.15" fill="#000" pointer-events="none"></circle>',1),Il=ne("<!><!>",1),Rl=ne('<g><rect fill="rgba(139, 90, 43, 0.2)" stroke="#8b5a2b" stroke-width="0.1" pointer-events="none"></rect></g>'),Nl=ne('<g opacity="0.5" pointer-events="none"><!></g>'),Ol=ne('<line opacity="0.7" pointer-events="none"></line>'),$l=ne("<!><!><!><!><!><!><!>",1),jl=Se('<main class="svelte-1g40uyy"><div class="header svelte-1g40uyy"><h1 class="svelte-1g40uyy">Deployment Practice</h1> <nav class="nav-links svelte-1g40uyy"><a href="#/setup" class="svelte-1g40uyy">Battlefield Setup</a> <a href="#/deployment" class="active svelte-1g40uyy">Deployment</a> <a href="#/" class="svelte-1g40uyy">Layout Builder</a> <a href="#/debug" class="svelte-1g40uyy">Debug Mode</a></nav></div> <div class="layout svelte-1g40uyy"><div class="sidebar svelte-1g40uyy"><section class="svelte-1g40uyy"><h3 class="svelte-1g40uyy">Add Models</h3> <div class="player-toggle svelte-1g40uyy"><button>Player 1</button> <button>Player 2</button></div> <div class="base-palette svelte-1g40uyy"><div class="palette-section svelte-1g40uyy"><h4 class="svelte-1g40uyy">Circles</h4> <div class="palette-grid svelte-1g40uyy"></div></div> <div class="palette-section svelte-1g40uyy"><h4 class="svelte-1g40uyy">Ovals</h4> <div class="palette-grid svelte-1g40uyy"></div></div></div></section> <section class="svelte-1g40uyy"><h3 class="svelte-1g40uyy">Selected Model</h3> <!></section> <section class="svelte-1g40uyy"><h3 class="svelte-1g40uyy">Actions</h3> <div class="button-group vertical svelte-1g40uyy"><button class="secondary svelte-1g40uyy">Clear All Models</button></div></section></div> <div class="battlefield-area svelte-1g40uyy"><div class="battlefield-container svelte-1g40uyy" role="presentation"><!></div> <div class="info svelte-1g40uyy"><p class="svelte-1g40uyy"> </p> <p class="hint svelte-1g40uyy">Press 1/2 to switch player | Press L to toggle LoS | Drag models to move</p></div></div></div></main>');function Wl(e,t){gt(t,!1);const r=()=>Oe(At,"$selectedModelId",l),a=()=>Oe(vt,"$models",l),i=()=>Oe(Mi,"$loadedTerrain",l),s=()=>Oe(rr,"$selectedDeployment",l),o=()=>Oe(pl,"$player1Models",l),u=()=>Oe(_l,"$player2Models",l),[l,d]=br(),c=P(),p=P(),g=P(),h=P(),L=P();let E=P(1),m=P(null),A=!1,R=P(null),U=P(!1);Gn(()=>{window.addEventListener("keydown",q)}),vi(()=>{window.removeEventListener("keydown",q)});function q(N){if(N.target.tagName==="INPUT")return;const we=r();if(N.key==="1"){N.preventDefault(),_(E,1);return}if(N.key==="2"){N.preventDefault(),_(E,2);return}if(N.key==="l"||N.key==="L"){N.preventDefault(),_(U,!n(U));return}if((N.key==="Delete"||N.key==="Backspace")&&we){N.preventDefault(),le();return}if(we&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(N.key)){N.preventDefault();const Ye=N.shiftKey?.1:1;let St=0,ct=0;switch(N.key){case"ArrowUp":ct=-Ye;break;case"ArrowDown":ct=Ye;break;case"ArrowLeft":St=-Ye;break;case"ArrowRight":St=Ye;break}if(r()){const Mt=a().find(Et=>Et.id===r());Mt&&vt.updateModel(r(),{x:Mt.x+St,y:Mt.y+ct})}return}if(N.key==="Escape"){te();return}}function te(){At.set(null)}function Pe(N,we){if(!n(R))return;A=!0;const Ye=n(R)(we.clientX,we.clientY);_(m,{baseType:N.type,x:Ye.x,y:Ye.y}),window.addEventListener("mousemove",be),window.addEventListener("mouseup",de)}function be(N){if(!A||!n(m)||!n(R))return;const we=n(R)(N.clientX,N.clientY);_(m,{...n(m),x:we.x,y:we.y})}function de(N){if(!A||!n(m)){A=!1,_(m,null),window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",de);return}const we=vt.add(n(m).baseType,n(E),n(m).x,n(m).y);At.set(we),_(m,null),A=!1,window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",de)}function Ce(N){At.set(N)}function Me(N,we,Ye){vt.updateModel(N,{x:we,y:Ye})}function _e(N,we){vt.updateModel(N,{rotation:we})}function le(){r()&&(vt.remove(r()),At.set(null))}function je(){confirm("Clear all models?")&&(vt.clear(),At.set(null))}function he(N){const we=ir(N.baseType);return sr(N.baseType)?{x:N.x,y:N.y,rx:we.width/2,ry:we.height/2,rotation:N.rotation||0}:{x:N.x,y:N.y,radius:we.radius}}let me=P(0);H(()=>(a(),r()),()=>{_(c,a().find(N=>N.id===r()))}),H(()=>(n(c),a()),()=>{_(p,n(c)?a().filter(N=>N.playerId!==n(c).playerId):[])}),H(()=>(i(),n(me),Or),()=>{_(g,i().terrains.map(N=>({id:ys(me),vertices:Or(N)})))}),H(()=>(i(),jr),()=>{_(h,i().walls.map(N=>mi(jr(N.shape),N.x,N.y,N.rotation)))}),H(()=>(n(c),n(U),n(p),n(g),n(h)),()=>{_(L,n(c)&&n(U)&&n(p).length>0?n(p).map(N=>({targetId:N.id,target:N,canSee:oo(he(n(c)),he(N),n(g),n(h))})):[])}),Yt(),Lt();var $e=jl(),ce=y(x($e),2),z=x(ce),fe=x(z),ue=y(x(fe),2),ae=x(ue);let Ee;var et=y(ae,2);let tt;var w=y(ue,2),b=x(w),j=y(x(b),2);ve(j,5,()=>(O(Nt),v(()=>Nt.circles)),Re,(N,we)=>{xr(N,{get baseSize(){return n(we)},get playerId(){return n(E)},onDragStart:Pe})});var k=y(b,2),T=y(x(k),2);ve(T,5,()=>(O(Nt),v(()=>Nt.ovals)),Re,(N,we)=>{xr(N,{get baseSize(){return n(we)},get playerId(){return n(E)},onDragStart:Pe})});var Q=y(fe,2),I=y(x(Q),2);{var Ae=N=>{var we=Dl(),Ye=x(we),St=y(x(Ye),2),ct=x(St),Mt=y(Ye,2),Et=y(x(Mt),2),on=x(Et),Ft=y(Mt,2),K=y(x(Ft),2),G=x(K),ie=y(Ft,2);{var Fe=B=>{var W=kl(),re=y(x(W),2),ee=x(re);Y(Le=>xe(ee,`${Le??""}Â°`),[()=>(n(c),v(()=>Math.round(n(c).rotation||0)))]),D(B,W)};ye(ie,B=>{O(sr),n(c),v(()=>sr(n(c).baseType))&&B(Fe)})}var ze=y(ie,2),ln=x(ze),S=x(ln),M=y(ze,2);{var $=B=>{var W=Tl(),re=y(x(W),2),ee=x(re);Y(Le=>xe(ee,`${Le??""}/${n(L),v(()=>n(L).length)??""} visible`),[()=>(n(L),v(()=>n(L).filter(Le=>Le.canSee).length))]),D(B,W)};ye(M,B=>{n(U),n(L),v(()=>n(U)&&n(L).length>0)&&B($)})}var J=y(M,2);Y((B,W,re)=>{xe(ct,B),xe(on,`Player ${n(c),v(()=>n(c).playerId)??""}`),xe(G,`${W??""}", ${re??""}"`)},[()=>(O(ir),n(c),v(()=>ir(n(c).baseType).label)),()=>(n(c),v(()=>n(c).x.toFixed(1))),()=>(n(c),v(()=>n(c).y.toFixed(1)))]),di(S,()=>n(U),B=>_(U,B)),X("click",J,le),D(N,we)},se=N=>{var we=Pl();D(N,we)};ye(I,N=>{n(c)?N(Ae):N(se,!1)})}var ge=y(Q,2),oe=y(x(ge),2),Te=x(oe),ke=y(z,2),Ze=x(ke),pt=x(Ze);Lr(pt,{children:Ur,$$slots:{default:(N,we)=>{const Ye=Ke(()=>we.screenToSvg);var St=$l(),ct=Ne(St);{var Mt=S=>{var M=ui();Y(()=>xe(M,(n(R),O(n(Ye)),v(()=>(_(R,n(Ye)),""))))),D(S,M)};ye(ct,S=>{n(Ye)&&!n(R)&&S(Mt)})}var Et=y(ct);{var on=S=>{var M=Il(),$=Ne(M);ve($,1,()=>(s(),v(()=>s().zones)),Re,(B,W)=>{var re=Cl();Y(ee=>{f(re,"d",ee),f(re,"fill",(n(W),v(()=>n(W).color))),f(re,"stroke",(n(W),v(()=>n(W).borderColor)))},[()=>(O(Wr),n(W),v(()=>Wr(n(W).path)))]),D(B,re)});var J=y($);ve(J,1,()=>(s(),v(()=>s().objectives)),Re,(B,W)=>{const re=Ke(()=>(n(W),v(()=>n(W).isPrimary?"#fbbf24":"#9ca3af"))),ee=Ke(()=>(n(W),v(()=>n(W).isPrimary?"rgba(251, 191, 36, 0.15)":"rgba(156, 163, 175, 0.15)")));var Le=Al(),nt=Ne(Le),Xe=y(nt),F=y(Xe);Y(()=>{f(nt,"cx",(n(W),v(()=>n(W).x))),f(nt,"cy",(n(W),v(()=>n(W).y))),f(nt,"r",Li),f(nt,"fill",n(ee)),f(nt,"stroke",n(re)),f(Xe,"cx",(n(W),v(()=>n(W).x))),f(Xe,"cy",(n(W),v(()=>n(W).y))),f(Xe,"r",bi),f(Xe,"fill",n(re)),f(F,"cx",(n(W),v(()=>n(W).x))),f(F,"cy",(n(W),v(()=>n(W).y)))}),D(B,Le)}),D(S,M)};ye(Et,S=>{s()&&S(on)})}var Ft=y(Et);ve(Ft,1,()=>(i(),v(()=>i().terrains)),S=>S.id,(S,M)=>{var $=Rl(),J=x($);Y(()=>{f($,"transform",`rotate(${n(M),v(()=>n(M).rotation)??""}, ${n(M),v(()=>n(M).x+n(M).width/2)??""}, ${n(M),v(()=>n(M).y+n(M).height/2)??""})`),f(J,"x",(n(M),v(()=>n(M).x))),f(J,"y",(n(M),v(()=>n(M).y))),f(J,"width",(n(M),v(()=>n(M).width))),f(J,"height",(n(M),v(()=>n(M).height)))}),D(S,$)});var K=y(Ft);ve(K,1,()=>(i(),v(()=>i().walls)),S=>S.id,(S,M)=>{var $=Nl(),J=x($);Qr(J,{get id(){return n(M),v(()=>n(M).id)},get x(){return n(M),v(()=>n(M).x)},get y(){return n(M),v(()=>n(M).y)},get shape(){return n(M),v(()=>n(M).shape)},get rotation(){return n(M),v(()=>n(M).rotation)},selected:!1,get screenToSvg(){return n(Ye)},onSelect:()=>{},onDrag:()=>{},onRotate:()=>{}}),D(S,$)});var G=y(K);ve(G,1,a,S=>S.id,(S,M)=>{{let $=Ke(()=>(n(M),r(),v(()=>n(M).id===r())));gr(S,{get id(){return n(M),v(()=>n(M).id)},get x(){return n(M),v(()=>n(M).x)},get y(){return n(M),v(()=>n(M).y)},get baseType(){return n(M),v(()=>n(M).baseType)},get playerId(){return n(M),v(()=>n(M).playerId)},get rotation(){return n(M),v(()=>n(M).rotation)},get selected(){return n($)},get screenToSvg(){return n(Ye)},onSelect:Ce,onDrag:Me,onRotate:_e})}});var ie=y(G);{var Fe=S=>{gr(S,{id:"phantom",get x(){return n(m),v(()=>n(m).x)},get y(){return n(m),v(()=>n(m).y)},get baseType(){return n(m),v(()=>n(m).baseType)},get playerId(){return n(E)},rotation:0,selected:!1,get screenToSvg(){return n(Ye)},onSelect:()=>{},onDrag:()=>{},onRotate:()=>{}})};ye(ie,S=>{n(m)&&S(Fe)})}var ze=y(ie);{var ln=S=>{var M=an(),$=Ne(M);ve($,1,()=>n(L),Re,(J,B)=>{var W=Ol();Y(()=>{f(W,"x1",(n(c),v(()=>n(c).x))),f(W,"y1",(n(c),v(()=>n(c).y))),f(W,"x2",(n(B),v(()=>n(B).target.x))),f(W,"y2",(n(B),v(()=>n(B).target.y))),f(W,"stroke",(n(B),v(()=>n(B).canSee?"#22c55e":"#ef4444"))),f(W,"stroke-width",(n(B),v(()=>n(B).canSee?.15:.1))),f(W,"stroke-dasharray",(n(B),v(()=>n(B).canSee?"none":"0.5 0.25")))}),D(J,W)}),D(S,M)};ye(ze,S=>{n(U),n(c),n(L),v(()=>n(U)&&n(c)&&n(L).length>0)&&S(ln)})}D(N,St)}}});var Bt=y(Ze,2),_t=x(Bt),lt=x(_t);Y(()=>{Ee=Ct(ae,1,"toggle-btn svelte-1g40uyy",null,Ee,{active:n(E)===1}),tt=Ct(et,1,"toggle-btn svelte-1g40uyy",null,tt,{active:n(E)===2}),xe(lt,`Battlefield: 60" x 44" | ${o(),v(()=>o().length)??""} P1 models | ${u(),v(()=>u().length)??""} P2 models`)}),X("click",ae,()=>_(E,1)),X("click",et,()=>_(E,2)),X("click",Te,je),X("click",Ze,te),D(e,$e),xt(),d()}var Yl=ne('<g><circle stroke="#000" stroke-width="0.05" role="button" tabindex="0" class="svelte-8uxsnw"></circle></g>');function Bl(e,t){gt(t,!1);let r=Z(t,"x",8),a=Z(t,"y",8),i=Z(t,"radius",8),s=Z(t,"color",8),o=Z(t,"screenToSvg",8),u=Z(t,"onDrag",8,()=>{}),l=P(!1);function d(E){E.preventDefault(),_(l,!0),window.addEventListener("mousemove",c),window.addEventListener("mouseup",p)}function c(E){if(!n(l))return;const m=o()(E.clientX,E.clientY),A=Math.max(i(),Math.min(V.width-i(),m.x)),R=Math.max(i(),Math.min(V.height-i(),m.y));u()(A,R)}function p(){_(l,!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",p)}Lt();var g=Yl();let h;var L=x(g);Y(()=>{h=Ct(g,0,"unit-base svelte-8uxsnw",null,h,{dragging:n(l)}),f(L,"cx",r()),f(L,"cy",a()),f(L,"r",i()),f(L,"fill",s())}),X("mousedown",L,d),D(e,g),xt()}var Fl=ne('<polygon fill="#4a4a4a" stroke="#2a2a2a" stroke-width="0.05" class="l-wall svelte-1pwohj7"></polygon>');function Xl(e,t){gt(t,!1);const r=P(),a=P(),i=P();let s=Z(t,"terrainX",8),o=Z(t,"terrainY",8),u=Z(t,"terrainHeight",8);const l=.5,d=4,c=8;H(()=>O(s()),()=>{_(r,s())}),H(()=>(O(o()),O(u())),()=>{_(a,o()+u())}),H(()=>(n(r),n(a)),()=>{_(i,[[n(r),n(a)],[n(r),n(a)-c],[n(r)+l,n(a)-c],[n(r)+l,n(a)-l],[n(r)+d,n(a)-l],[n(r)+d,n(a)]].map(g=>g.join(",")).join(" "))}),Yt(),Lt();var p=Fl();Y(()=>f(p,"points",n(i))),D(e,p),xt()}var Hl=ne('<g><rect fill="rgba(139, 90, 43, 0.3)" stroke="#8b5a2b" stroke-width="0.1" stroke-dasharray="0.5,0.25" role="button" tabindex="0" class="svelte-1hec6rb"></rect><!></g><g><line stroke="#666" stroke-width="0.08" stroke-dasharray="0.2,0.1"></line><circle r="0.6" fill="#ff9800" stroke="#e65100" stroke-width="0.08" role="button" tabindex="0" class="svelte-1hec6rb"></circle></g>',1);function Ul(e,t){gt(t,!1);const r=P(),a=P(),i=P(),s=P(),o=P();let u=Z(t,"x",8),l=Z(t,"y",8),d=Z(t,"width",8),c=Z(t,"height",8),p=Z(t,"rotation",8,0),g=Z(t,"screenToSvg",8),h=Z(t,"onDrag",8,()=>{}),L=Z(t,"onRotate",8,()=>{}),E=P(!1),m=P(!1),A={x:0,y:0};function R(ce){ce.preventDefault(),ce.stopPropagation(),_(E,!0);const z=g()(ce.clientX,ce.clientY);A={x:z.x-u(),y:z.y-l()},window.addEventListener("mousemove",U),window.addEventListener("mouseup",q)}function U(ce){if(!n(E))return;const z=g()(ce.clientX,ce.clientY);let fe=z.x-A.x,ue=z.y-A.y;ce.shiftKey||(fe=Math.round(fe),ue=Math.round(ue));const ae=Math.max(d(),c())/2;fe=Math.max(-ae,Math.min(V.width-d()+ae,fe)),ue=Math.max(-ae,Math.min(V.height-c()+ae,ue)),h()(fe,ue)}function q(){_(E,!1),window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",q)}function te(ce){ce.preventDefault(),ce.stopPropagation(),_(m,!0),window.addEventListener("mousemove",Pe),window.addEventListener("mouseup",be)}function Pe(ce){if(!n(m))return;const z=g()(ce.clientX,ce.clientY),fe=z.x-n(r),ue=z.y-n(a);let ae=Math.atan2(ue,fe)*180/Math.PI;ae+=45,ce.shiftKey||(ae=Math.round(ae/15)*15),L()(ae)}function be(){_(m,!1),window.removeEventListener("mousemove",Pe),window.removeEventListener("mouseup",be)}H(()=>(O(u()),O(d())),()=>{_(r,u()+d()/2)}),H(()=>(O(l()),O(c())),()=>{_(a,l()+c()/2)}),H(()=>(O(d()),O(c())),()=>{_(i,Math.max(d(),c())/2+1.5)}),H(()=>(n(r),n(i),O(p())),()=>{_(s,n(r)+n(i)*Math.cos((p()-45)*Math.PI/180))}),H(()=>(n(a),n(i),O(p())),()=>{_(o,n(a)+n(i)*Math.sin((p()-45)*Math.PI/180))}),Yt(),Lt();var de=Hl(),Ce=Ne(de);let Me;var _e=x(Ce),le=y(_e);Xl(le,{get terrainX(){return u()},get terrainY(){return l()},get terrainHeight(){return c()}});var je=y(Ce);let he;var me=x(je),$e=y(me);Y(()=>{Me=Ct(Ce,0,"terrain-footprint svelte-1hec6rb",null,Me,{dragging:n(E),rotating:n(m)}),f(Ce,"transform",`rotate(${p()??""}, ${n(r)??""}, ${n(a)??""})`),f(_e,"x",u()),f(_e,"y",l()),f(_e,"width",d()),f(_e,"height",c()),he=Ct(je,0,"rotation-handle svelte-1hec6rb",null,he,{active:n(m)}),f(me,"x1",n(r)),f(me,"y1",n(a)),f(me,"x2",n(s)),f(me,"y2",n(o)),f($e,"cx",n(s)),f($e,"cy",n(o))}),X("mousedown",_e,R),X("mousedown",$e,te),D(e,de),xt()}var Kl=Se('<button class="svelte-12aohay"> </button>'),Vl=Se('<button class="svelte-12aohay"> </button>'),Zl=ne('<line stroke-width="0.05"></line>'),zl=ne('<line stroke="#22c55e" stroke-width="0.15"></line>'),ql=ne('<line stroke="#ef4444" stroke-width="0.15" stroke-dasharray="0.5,0.25"></line>'),Gl=ne("<!><!><!><!><!><!><!><!><!>",1),Jl=Se('<main class="svelte-12aohay"><div class="header svelte-12aohay"><h1 class="svelte-12aohay">Debug Mode</h1> <nav class="nav-links svelte-12aohay"><a href="#/setup" class="svelte-12aohay">Battlefield Setup</a> <a href="#/deployment" class="svelte-12aohay">Deployment</a> <a href="#/" class="svelte-12aohay">Layout Builder</a> <a href="#/debug" class="active svelte-12aohay">Debug Mode</a></nav></div> <div class="layout svelte-12aohay"><div class="sidebar svelte-12aohay"><section class="svelte-12aohay"><h3 class="svelte-12aohay">LOS Debug</h3> <div class="controls svelte-12aohay"><label class="svelte-12aohay"><input type="checkbox" class="svelte-12aohay"/> Show debug rays</label> <span> </span></div></section> <section class="svelte-12aohay"><h3 class="svelte-12aohay">Add Terrain</h3> <div class="button-group svelte-12aohay"></div></section> <section class="svelte-12aohay"><h3 class="svelte-12aohay">Add Wall</h3> <div class="button-group svelte-12aohay"></div></section> <section class="svelte-12aohay"><h3 class="svelte-12aohay">Add Models</h3> <div class="player-toggle svelte-12aohay"><button>Player 1</button> <button>Player 2</button></div> <div class="base-palette svelte-12aohay"><div class="palette-section svelte-12aohay"><h4 class="svelte-12aohay">Circles</h4> <div class="palette-grid svelte-12aohay"></div></div> <div class="palette-section svelte-12aohay"><h4 class="svelte-12aohay">Ovals</h4> <div class="palette-grid svelte-12aohay"></div></div></div></section></div> <div class="battlefield-area svelte-12aohay"><div class="battlefield-container svelte-12aohay"><!></div> <div class="info svelte-12aohay"><p class="svelte-12aohay"> </p> <p class="hint svelte-12aohay">Scroll to zoom | Space+drag to pan | Double-click to reset view</p></div></div></div></main>');function Ql(e,t){gt(t,!1);const r=()=>Oe(_a,"$units",h),a=()=>Oe(co,"$allTerrainPolygons",h),i=()=>Oe(lo,"$allWalls",h),s=()=>Oe(ma,"$debugMode",h),o=()=>Oe(at,"$layoutTerrains",h),u=()=>Oe(dt,"$selectedTerrainId",h),l=()=>Oe(Ge,"$layoutWalls",h),d=()=>Oe(ft,"$selectedWallId",h),c=()=>Oe(vt,"$models",h),p=()=>Oe(At,"$selectedModelId",h),g=()=>Oe(Un,"$terrains",h),[h,L]=br(),E=P();function m(K,G,ie){_a.update(Fe=>Fe.map(ze=>ze.id===K?{...ze,x:G,y:ie}:ze))}function A(K,G,ie){Un.update(Fe=>Fe.map(ze=>ze.id===K?{...ze,x:G,y:ie}:ze))}function R(K,G){Un.update(ie=>ie.map(Fe=>Fe.id===K?{...Fe,rotation:G}:Fe))}function U(K,G){at.add(K,G)}function q(K){Ge.add(K)}function te(K){dt.set(K),ft.set(null),At.set(null)}function Pe(K){ft.set(K),dt.set(null),At.set(null)}function be(K,G,ie){at.updateTerrain(K,{x:G,y:ie})}function de(K,G,ie){Ge.updateWall(K,{x:G,y:ie})}function Ce(K,G){at.updateTerrain(K,{rotation:G})}function Me(K,G){Ge.updateWall(K,{rotation:G})}let _e=P(1),le=P(null),je=!1,he=P(null);function me(K,G){if(!n(he))return;je=!0;const ie=n(he)(G.clientX,G.clientY);_(le,{baseType:K.type,x:ie.x,y:ie.y}),window.addEventListener("mousemove",$e),window.addEventListener("mouseup",ce)}function $e(K){if(!je||!n(le)||!n(he))return;const G=n(he)(K.clientX,K.clientY);_(le,{...n(le),x:G.x,y:G.y})}function ce(K){if(!je||!n(le)){je=!1,_(le,null),window.removeEventListener("mousemove",$e),window.removeEventListener("mouseup",ce);return}vt.add(n(le).baseType,n(_e),n(le).x,n(le).y),_(le,null),je=!1,window.removeEventListener("mousemove",$e),window.removeEventListener("mouseup",ce)}function z(K){At.set(K),dt.set(null),ft.set(null)}function fe(K,G,ie){vt.updateModel(K,{x:G,y:ie})}function ue(K,G){vt.updateModel(K,{rotation:G})}H(()=>(r(),a(),i()),()=>{_(E,r().length>=2?so(r()[0],r()[1],a(),i()):{canSee:!0,rays:[]})}),Yt(),Lt();var ae=Jl(),Ee=y(x(ae),2),et=x(Ee),tt=x(et),w=y(x(tt),2),b=x(w),j=x(b),k=y(b,2);let T;var Q=x(k),I=y(tt,2),Ae=y(x(I),2);ve(Ae,5,()=>pi,Re,(K,G)=>{var ie=Kl(),Fe=x(ie);Y(()=>xe(Fe,(n(G),v(()=>n(G).label)))),X("click",ie,()=>U(n(G).width,n(G).height)),D(K,ie)});var se=y(I,2),ge=y(x(se),2);ve(ge,5,()=>$r,Re,(K,G)=>{var ie=Vl(),Fe=x(ie);Y(()=>xe(Fe,(n(G),v(()=>n(G).label)))),X("click",ie,()=>q(n(G).shape)),D(K,ie)});var oe=y(se,2),Te=y(x(oe),2),ke=x(Te);let Ze;var pt=y(ke,2);let Bt;var _t=y(Te,2),lt=x(_t),N=y(x(lt),2);ve(N,5,()=>(O(Nt),v(()=>Nt.circles)),Re,(K,G)=>{xr(K,{get baseSize(){return n(G)},get playerId(){return n(_e)},onDragStart:me})});var we=y(lt,2),Ye=y(x(we),2);ve(Ye,5,()=>(O(Nt),v(()=>Nt.ovals)),Re,(K,G)=>{xr(K,{get baseSize(){return n(G)},get playerId(){return n(_e)},onDragStart:me})});var St=y(et,2),ct=x(St),Mt=x(ct);Lr(Mt,{children:Ur,$$slots:{default:(K,G)=>{const ie=Ke(()=>G.screenToSvg);var Fe=Gl(),ze=Ne(Fe);{var ln=F=>{var C=ui();Y(()=>xe(C,(n(he),O(n(ie)),v(()=>(_(he,n(ie)),""))))),D(F,C)};ye(ze,F=>{n(ie)&&!n(he)&&F(ln)})}var S=y(ze);{var M=F=>{var C=an(),Be=Ne(C);ve(Be,1,()=>(n(E),v(()=>n(E).rays)),Re,(rt,Ue)=>{var He=Zl();Y(()=>{f(He,"x1",(n(Ue),v(()=>n(Ue).from.x))),f(He,"y1",(n(Ue),v(()=>n(Ue).from.y))),f(He,"x2",(n(Ue),v(()=>n(Ue).to.x))),f(He,"y2",(n(Ue),v(()=>n(Ue).to.y))),f(He,"stroke",(n(Ue),v(()=>n(Ue).blocked?"#ff000033":"#00ff0033")))}),D(rt,He)}),D(F,C)};ye(S,F=>{s()&&F(M)})}var $=y(S);{var J=F=>{var C=an(),Be=Ne(C);{var rt=He=>{var ut=zl();Y(()=>{f(ut,"x1",(n(E),v(()=>n(E).firstClearRay.from.x))),f(ut,"y1",(n(E),v(()=>n(E).firstClearRay.from.y))),f(ut,"x2",(n(E),v(()=>n(E).firstClearRay.to.x))),f(ut,"y2",(n(E),v(()=>n(E).firstClearRay.to.y)))}),D(He,ut)},Ue=He=>{var ut=an(),cn=Ne(ut);{var un=jn=>{var dn=ql();Y(()=>{f(dn,"x1",(r(),v(()=>r()[0].x))),f(dn,"y1",(r(),v(()=>r()[0].y))),f(dn,"x2",(r(),v(()=>r()[1].x))),f(dn,"y2",(r(),v(()=>r()[1].y)))}),D(jn,dn)};ye(cn,jn=>{n(E),v(()=>!n(E).canSee)&&jn(un)},!0)}D(He,ut)};ye(Be,He=>{n(E),v(()=>n(E).canSee&&n(E).firstClearRay)?He(rt):He(Ue,!1)})}D(F,C)};ye($,F=>{r(),v(()=>r().length>=2)&&F(J)})}var B=y($);ve(B,1,o,F=>F.id,(F,C)=>{{let Be=Ke(()=>(n(C),u(),v(()=>n(C).id===u())));gi(F,{get id(){return n(C),v(()=>n(C).id)},get x(){return n(C),v(()=>n(C).x)},get y(){return n(C),v(()=>n(C).y)},get width(){return n(C),v(()=>n(C).width)},get height(){return n(C),v(()=>n(C).height)},get rotation(){return n(C),v(()=>n(C).rotation)},get selected(){return n(Be)},get screenToSvg(){return n(ie)},onSelect:te,onDrag:be,onRotate:Ce})}});var W=y(B);ve(W,1,l,F=>F.id,(F,C)=>{{let Be=Ke(()=>(n(C),d(),v(()=>n(C).id===d())));Qr(F,{get id(){return n(C),v(()=>n(C).id)},get x(){return n(C),v(()=>n(C).x)},get y(){return n(C),v(()=>n(C).y)},get shape(){return n(C),v(()=>n(C).shape)},get rotation(){return n(C),v(()=>n(C).rotation)},get selected(){return n(Be)},get screenToSvg(){return n(ie)},onSelect:Pe,onDrag:de,onRotate:Me})}});var re=y(W);ve(re,1,c,F=>F.id,(F,C)=>{{let Be=Ke(()=>(n(C),p(),v(()=>n(C).id===p())));gr(F,{get id(){return n(C),v(()=>n(C).id)},get x(){return n(C),v(()=>n(C).x)},get y(){return n(C),v(()=>n(C).y)},get baseType(){return n(C),v(()=>n(C).baseType)},get playerId(){return n(C),v(()=>n(C).playerId)},get rotation(){return n(C),v(()=>n(C).rotation)},get selected(){return n(Be)},get screenToSvg(){return n(ie)},onSelect:z,onDrag:fe,onRotate:ue})}});var ee=y(re);{var Le=F=>{gr(F,{id:"phantom",get x(){return n(le),v(()=>n(le).x)},get y(){return n(le),v(()=>n(le).y)},get baseType(){return n(le),v(()=>n(le).baseType)},get playerId(){return n(_e)},rotation:0,selected:!1,get screenToSvg(){return n(ie)},onSelect:()=>{},onDrag:()=>{},onRotate:()=>{}})};ye(ee,F=>{n(le)&&F(Le)})}var nt=y(ee);ve(nt,1,g,F=>F.id,(F,C)=>{Ul(F,{get x(){return n(C),v(()=>n(C).x)},get y(){return n(C),v(()=>n(C).y)},get width(){return n(C),v(()=>n(C).width)},get height(){return n(C),v(()=>n(C).height)},get rotation(){return n(C),v(()=>n(C).rotation)},get screenToSvg(){return n(ie)},onDrag:(Be,rt)=>A(n(C).id,Be,rt),onRotate:Be=>R(n(C).id,Be)})});var Xe=y(nt);ve(Xe,1,r,F=>F.id,(F,C)=>{Bl(F,{get x(){return n(C),v(()=>n(C).x)},get y(){return n(C),v(()=>n(C).y)},get radius(){return n(C),v(()=>n(C).radius)},get color(){return n(C),v(()=>n(C).color)},get screenToSvg(){return n(ie)},onDrag:(Be,rt)=>m(n(C).id,Be,rt)})}),D(K,Fe)}}});var Et=y(ct,2),on=x(Et),Ft=x(on);Y(()=>{T=Ct(k,1,"los-status svelte-12aohay",null,T,{"can-see":n(E).canSee,blocked:!n(E).canSee}),xe(Q,(n(E),v(()=>n(E).canSee?"Can See":"Blocked"))),Ze=Ct(ke,1,"toggle-btn svelte-12aohay",null,Ze,{active:n(_e)===1}),Bt=Ct(pt,1,"toggle-btn svelte-12aohay",null,Bt,{active:n(_e)===2}),xe(Ft,`Battlefield: 60" x 44" | ${o(),v(()=>o().length)??""} terrain | ${l(),v(()=>l().length)??""} walls | ${c(),v(()=>c().length)??""} models | ${g(),v(()=>g().length)??""} debug terrain | ${r(),v(()=>r().length)??""} debug units`)}),di(j,s,K=>Js(ma,K)),X("click",ke,()=>_(_e,1)),X("click",pt,()=>_(_e,2)),D(e,ae),xt(),L()}function ec(e,t){gt(t,!1);let r=P("main");function a(){const l=window.location.hash;l==="#/debug"?_(r,"debug"):l==="#/setup"?_(r,"setup"):l==="#/deployment"?_(r,"deployment"):_(r,"setup")}Gn(()=>(a(),window.addEventListener("hashchange",a),()=>window.removeEventListener("hashchange",a))),Lt();var i=an(),s=Ne(i);{var o=l=>{Ql(l,{})},u=l=>{var d=an(),c=Ne(d);{var p=h=>{yl(h,{})},g=h=>{var L=an(),E=Ne(L);{var m=R=>{Wl(R,{})},A=R=>{Zo(R,{})};ye(E,R=>{n(r)==="deployment"?R(m):R(A,!1)},!0)}D(h,L)};ye(c,h=>{n(r)==="setup"?h(p):h(g,!1)},!0)}D(l,d)};ye(s,l=>{n(r)==="debug"?l(o):l(u,!1)})}D(e,i),xt()}Ns(ec,{target:document.getElementById("app")});
//# sourceMappingURL=index-DkwbEFxU.js.map
